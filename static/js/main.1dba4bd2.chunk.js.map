{"version":3,"sources":["config/firebase.ts","models/index.ts","state/context/index.tsx","components/breadcrumb/breadcrumb.tsx","components/breadcrumb/index.ts","components/explorer/contextMenu.tsx","components/elements/block/pdf.tsx","components/elements/block/view.tsx","components/elements/border/pdf.tsx","components/elements/border/view.tsx","components/elements/table/helpers.tsx","components/elements/table/pdf.tsx","hooks/useModal.ts","hooks/useFileSystem.ts","utils/serviceWorker.ts","utils/deepClone.ts","hooks/useEditor.ts","state/editor.tsx","components/elements/table/view.tsx","components/elements/text/pdf.tsx","components/elements/text/view.tsx","components/elements/image/pdf.tsx","components/elements/image/view.tsx","components/elements/index.ts","components/documentPDF/index.tsx","components/contextMenu/contextMenu.tsx","components/dialog/dialog.tsx","components/fsTree/index.tsx","state/modal.tsx","components/modal/index.tsx","state/fileSystem.tsx","utils/classnames.ts","components/explorer/explorer.tsx","components/explorer/index.tsx","components/sidebar/sidebar.tsx","components/layout/layout.tsx","pages/dashboard/dashboard.tsx","components/editor/components/block/block.tsx","components/editor/components/border/border.tsx","components/editor/components/image/image.tsx","components/editor/components/table/table.tsx","components/editor/editor.tsx","components/elementControl/index.tsx","components/textSettings/textSettings.tsx","components/page/box.tsx","components/page/index.tsx","pages/document/components/leftPanel.tsx","pages/document/document.tsx","pages/document/index.tsx","routing/routes.tsx","index.tsx","assets/logo.png"],"names":["firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","uploadString","firestore","FILE_SYSTEM_ELEMENT","FOLDER","DOCUMENT","FILE_STATUS","DOCUMENT_IN_PROGRESS","DOCUMENT__DONE","TEMPLATE","ELEMENT","mockFn","documents","collection","FSContext","React","createContext","fsItems","Map","parentForCreateFromTemplate","copiedElement","setParentForCreateFromTemplate","getFolderElementsTreeById","getFolderElementsById","getElement","commit","rename","removeById","createItem","copyItem","pasteItem","FSProvider","_React$PureComponent","_getPrototypeOf2","_this","Object","classCallCheck","this","_len","arguments","length","args","Array","_key","possibleConstructorReturn","getPrototypeOf","call","apply","concat","state","unsubscribe","id","type","map","element","children","objectSpread","items","forEach","value","isNeededType","parentId","push","get","doc","update","status","data","name","delete","_ref","asyncToGenerator","regenerator_default","a","mark","_callee","newDocument","templateSnapshot","docRef","wrap","_context","prev","next","content","formTemplate","documentId","sent","add","abrupt","t0","Error","stop","_x","setState","_ref2","_callee2","newElement","_context2","_x2","parent","inherits","createClass","key","subscribe","nextProps","_this$state","react_default","createElement","Provider","props","_this2","onSnapshot","querySnapshot","set","PureComponent","getBreadcrumbList","list","item","reverse","_item","path","breadcrumbName","itemRender","route","params","routes","indexOf","react_router_dom","to","Breadcrumb","withRouter","match","useContext","breadcrumb","className","CONTEXT_MENU_ID","menus","icon","currentId","contextMenuMap","_contextMenuMap","defineProperty","getContextMenuId","contextMenu","BlockPDF","style","react_pdf_browser_es","BlockView","BorderPDF","BorderView","DEFAULT_PROPS","DEFAULT_BORDER","getIdFromCellPosition","row","column","baseTableStyles","table","display","flexDirection","border","backgroundColor","fontSize","header","fontWeight","footer","cell","padding","getTableMembers","hasFooter","undefined","_data","toArray","other","slice","pop","body","cellRender","defaultColumnWidth","defaultCellStyle","cellsStyle","CellComponent","changeTable","isActive","isDone","actions","rowIndex","rowsLength","cellType","cellIndex","defaultBorderStyle","rowCount","current","columnCount","_getCellStyle","_getCellStyle$colSpan","colSpan","_getCellStyle$style","borderWidth","borderStyle","borderColor","defaultStyle","objectWithoutProperties","resultStyle","width","isLastRow","isLastColumn","borderBottom","borderRight","getBorderStyle","defaultStyles","StyleSheet","create","TableCell","TablePDF","_props$hasFooter","_props$style","_props$cellsStyle","_getTableMembers","height","render","rows","initialState","open","title","target","useModal","_useState","useState","_useState2","slicedToArray","setModalState","nextState","closeModal","useFileSystem","folderId","_useContext","defaultFolders","filter","isDefault","progress","elements","isLocalhost","Boolean","window","location","hostname","register","config","navigator","URL","process","href","origin","addEventListener","swUrl","fetch","then","response","contentType","headers","serviceWorker","ready","registration","unregister","reload","registerValidSW","catch","console","log","checkValidServiceWorker","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","error","deepClone","obj","serialized","JSON","stringify","parse","saveIntervalId","maxX","maxY","removeCallback","removeIndex","_","index","pagesKey","Symbol","useEditorContext","createUseContext","fsElement","fsElementId","pages","setPages","useEffect","document","isArray","setInterval","clearInterval","_useState3","_useState4","activeElement","_setActiveElement","resetActiveElement","isElementActive","_useState5","_useState6","activeId","_setActiveId","addElement","pageIndex","position","zoom","screen","pixelDepth","size","x","y","Date","toString","page","toConsumableArray","changeElement","elementIndex","_useState7","_useState8","showPreview","setShowPreview","_useState9","_useState10","drawerVisible","setDrawerVisible","_useState11","_useState12","preview","setPreview","showPreviewHandler","addPage","deletePage","deleteElement","setActiveElement","addRowToTableElement","insertIndex","columns","splice","addColumnToTableElement","addColSpan","cellId","prevColspan","removeRowFromTableElement","removeColumnFromTableElement","togglePreview","handleChangeText","changeTextStyle","setActiveId","resetActiveId","handleChangeSettings","addImage","input","file","result","onchange","e","reader","FileReader","files","onload","readAsDataURL","click","showDrawer","closeDrawer","isEditable","setIsEditable","toggleEditability","inputRef","useRef","focus","save","ev","es_form","Item","TextArea","ref","autosize","defaultValue","onPressEnter","onBlur","onClick","tooltip","placement","es_button","shape","es_icon","theme","TableView","innerRef","Fragment","TextPDF","TextView","minHeight","onChange","ImagePDF","src","ImageView","background","backgroundSize","textElement","color","imageElement","blockElement","borderElement","tableElement","_elements","control","DocumentPDF","elementKey","top","left","pdf_BlockPDF","pdf_BorderPDF","pdf_TextPDF","pdf_ImagePDF","pdf_TablePDF","ContextMenuConnected","connectMenu","trigger","includes","fileName","es6","menu","selectable","documentPDF_DocumentPDF","blob","url","loading","DialogComponent","bodyStyle","onAction","onClose","modal","visible","onOk","onCancel","getTreeNodeIcon","expanded","icon_default","TreeComponent","onSelect","tree_default","showIcon","switcherIcon","event","node","getTreeNodes","TreeNode","MODAL_MODES","CREATE_FOLDER","CREATE_DOCUMENT","CREATE_DOCUMENT_FROM_TEMPLATE","RENAME_FS_ITEM","useModalContext","setOpen","mode","setMode","setTarget","modalToggle","modalMode","getTitle","Modal","setName","_useModalContext","history","onCreate","isTemplate","pathname","handleOk","autoFocus","hasOwn","hasOwnProperty","getFSElementClasses","classNames","classes","_i","_args","arg","argType","_i2","_Object$keys","keys","join","fs-element","in-progress","Explorer","_useFileSystem","fsActions","_useModal","_useModal2","elementsModal","elementsModalActions","handleFSElement","fsTree_TreeComponent","handleContextMenuActions","table_default","bordered","showHeader","pagination","dataIndex","dataSource","date","handleElementsModalAction","_elementsModal$target","collect","_iconsMap","docMark","folderType","getIcon","menuData","i","dialog_DialogComponent","SidebarComponent","collapsed","setCollapsed","layout","Sider","collapsible","onCollapse","alt","logo","split","letter","text","LayoutComponent","sidebar_SidebarComponent","DashboardPage","layout_LayoutComponent","Header","Content","Footer","popover","zIndex","cover","right","bottom","BlockComponent","displayColorPicker","setDisplayColorPicker","colorActive","setColor","input_number","Chrome_default","onChangeComplete","hex","BorderComponent","styleDefault","ImageComponent","TableComponent","openBorderColor","setBorderColor","EditorComponent","_useEditorContext","block","image_image","table_table","settingsComponents","DND_CONTROL_TYPES","ElementControlComponent","_useDrag","useDrag","drag","settingsContent","TextSettings","react_color_lib","getHeight","innerElement","getBoundingClientRect","getEnableResizing","done","enableResizing","bottomLeft","bottomRight","topLeft","topRight","Box","isActiveText","react_rnd_lib","bounds","stopPropagation","onDoubleClick","disableDragging","onDragStop","onResizeStop","dir","elementRef","delta","_elementRef$getBoundi","textSettings_TextSettings","view_BlockView","view_BorderView","view_TableView","view_ImageView","view_TextView","renderElement","PageComponent","bodyOffset","setBodyOffset","scrollY","setScrollY","listRef","_useDrop","useDrop","accept","drop","monitor","getClientOffset","offsetLeft","offsetTop","didDrop","isOver","isOverCurrent","shallow","_useDrop2","listener","removeEventListener","box","LeftPanel","values","elementControl_ElementControlComponent","DocumentPageComponent","isInProgress","handleAction","goBack","Group","typography","Title","level","code","lib","backend","HTML5Backend","leftPanel_LeftPanel","page_PageComponent","drawer","editor_EditorComponent","DocumentPage","renderLayout","react_router","ReactDOM","context_FSProvider","exact","component","getElementById","module","exports","__webpack_require__","p"],"mappings":"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","file":"static/js/main.1dba4bd2.chunk.js","sourcesContent":["import firebase from '@firebase/app';\nimport '@firebase/auth';\nimport '@firebase/firestore';\nimport { FirebaseFirestore } from '@firebase/firestore-types';\n\nconst config = {\n  apiKey: 'AIzaSyCopkTv3qV3lT5nE-TARB5FjBe-TwR8A8w',\n  authDomain: 'binale-software-invoicing.firebaseapp.com',\n  databaseURL: 'https://binale-software-invoicing.firebaseio.com',\n  projectId: 'binale-software-invoicing',\n  storageBucket: 'binale-software-invoicing.appspot.com',\n  messagingSenderId: '878563105532',\n  uploadString: 'binale-software-invoicing.firebaseapp.com',\n};\n\nfirebase.initializeApp(config);\n\nexport const firestore: FirebaseFirestore = (firebase as any).firestore();\n\nexport { firebase };\n","export type GuidType = string;\nexport type DateISO = string;\n\n/*\n  File system models -- start\n */\n\nconst FOLDER = 'FILE_SYSTEM_ELEMENT__FOLDER';\nconst DOCUMENT = 'FILE_SYSTEM_ELEMENT__DOCUMENT';\n\nexport const FILE_SYSTEM_ELEMENT = { FOLDER, DOCUMENT };\n\nexport type FileSystemElementType =\n  | typeof FILE_SYSTEM_ELEMENT.FOLDER\n  | typeof FILE_SYSTEM_ELEMENT.DOCUMENT;\n\nexport interface UserLog {\n  userId?: GuidType;\n  login: string;\n  date: DateISO;\n}\n\nexport interface FSTarget<T> {\n  name?: string;\n  value: string;\n  item: T;\n}\n\nexport interface FileSystemElement {\n  id?: GuidType;\n  parentId: GuidType | null;\n  name: string;\n  type: FileSystemElementType;\n  status?: FileStatusType;\n  formTemplate?: boolean;\n  documentId?: GuidType;\n  editor?: UserLog;\n  creator?: UserLog;\n  isDefault?: boolean;\n}\n\nexport interface FileSystemNode extends FileSystemElement {\n  children?: FileSystemNode[];\n}\n\nconst DOCUMENT_IN_PROGRESS = 'FILE_STATUS__DOCUMENT_IN_PROGRESS';\nconst DOCUMENT__DONE = 'FILE_STATUS__DOCUMENT__DONE';\nconst TEMPLATE = 'FILE_STATUS__TEMPLATE';\n\nexport const FILE_STATUS = { DOCUMENT_IN_PROGRESS, DOCUMENT__DONE, TEMPLATE };\n\nexport type FileStatusType =\n  | typeof FILE_STATUS.DOCUMENT_IN_PROGRESS\n  | typeof FILE_STATUS.DOCUMENT__DONE\n  | typeof FILE_STATUS.TEMPLATE;\n\n/*\n  File system models -- end\n*/\n\n/*\n  Document models -- start\n*/\n\nconst TEXT = 'ELEMENT__TEXT';\nconst BLOCK = 'ELEMENT__BLOCK';\nconst BORDER = 'ELEMENT__BORDER';\nconst IMAGE = 'ELEMENT__IMAGE';\nconst TABLE = 'ELEMENT__TABLE';\n\nexport const ELEMENT = { TEXT, BLOCK, BORDER, IMAGE, TABLE };\n\nexport type ElementType =\n  | typeof ELEMENT.TEXT\n  | typeof ELEMENT.BLOCK\n  | typeof ELEMENT.BORDER\n  | typeof ELEMENT.IMAGE\n  | typeof ELEMENT.TABLE;\n\nexport interface Position {\n  x: number;\n  y: number;\n}\n\nexport interface Size {\n  height: number;\n  width: number;\n}\n\nexport interface Element {\n  id: GuidType;\n  type: ElementType;\n  position: Position;\n  size: Size;\n}\n\nexport interface BaseStyle {\n  width?: string;\n  height?: string;\n  borderWidth?: string;\n  borderColor?: string;\n  borderStyle?: string;\n  border?: string;\n  borderTop?: string;\n  borderRight?: string;\n  borderBottom?: string;\n  borderLeft?: string;\n  opacity?: string;\n  backgroundColor?: string;\n  borderBottomWidth?: string;\n  borderBottomStyle?: string;\n  borderBottomColor?: string;\n  borderRightWidth?: string;\n  borderRightStyle?: string;\n  borderRightColor?: string;\n}\n\nexport interface FontStyle {\n  color?: string;\n  fontFamily?: string;\n  fontSize?: string;\n  fontStyle?: string;\n  fontWeight?: string;\n  letterSpacing?: string;\n  lineHeight?: string;\n  textAlign?: string;\n  textTransform?: string;\n  textDecoration?: string;\n}\n\nexport type ElementStyle = BaseStyle & FontStyle;\n\nexport interface CellStyle {\n  colSpan?: number;\n  // rowSpan?: number; TODO: implement in next version\n  style?: ElementStyle;\n}\n\nexport interface CellStyles {\n  [id: string]: CellStyle;\n}\n\nexport type CellType = 'header' | 'body' | 'footer' | 'pdf';\n\nexport interface CellProps {\n  isActive?: boolean;\n  isDone?: boolean;\n  row: number;\n  column: number;\n  value: string;\n  style: ElementStyle;\n  changeTable: ChangeTable | undefined;\n  actions?: {\n    addColSpan: (row: number, column: number) => void;\n    removeColumnFromTableElement: (column: number) => void;\n  };\n  cellType?: CellType;\n}\n\nexport interface TableProps {\n  data: string[][];\n  hasFooter?: boolean;\n  style?: ElementStyle;\n  cellsStyle?: CellStyles;\n}\n\nexport type TableElement = Element & TableProps;\n\nexport interface BlockProps {\n  style?: BaseStyle;\n}\n\nexport type BlockElement = Element & BlockProps;\n\nexport interface BorderProps {\n  style?: BaseStyle;\n}\n\nexport type BorderElement = Element & BorderProps;\n\nexport interface TextProps {\n  value?: string;\n  style?: ElementStyle;\n}\n\nexport type TextElement = Element & TextProps;\n\nexport interface ImageProps {\n  style?: BaseStyle;\n  value?: string;\n}\n\nexport type ImageElement = Element & ImageProps;\n\nexport type ElementUnion = TableElement | BlockElement | BorderElement | TextElement | ImageElement;\n\nexport interface Control {\n  name: string;\n  icon: string;\n  type: ElementType;\n}\n\nexport type DocumentPage = ElementUnion[];\n\nexport interface ElementControl {\n  control: Control;\n  element: ElementUnion;\n}\n\nexport interface DragObject {\n  type: string; // TODO: make type\n  element: ElementType;\n}\n\nexport type ChangeTable = (row: number, column: number, value: string) => void;\n\nexport type SerializedDocument = string;\n\nexport interface Document {\n  id?: GuidType;\n  templateId?: GuidType;\n  name: string;\n  content: SerializedDocument; // === JSON.stringify(DocumentPage[])\n}\n\n/*\n  Document models -- end\n*/\n\n/*\n  User models -- start\n*/\n\nconst ADMIN = 'ROLE__ADMIN';\nconst MODERATOR = 'ROLE__MODERATOR';\nconst PARTICIPANT = 'ROLE__PARTICIPANT';\n\nexport const ROLE = { ADMIN, MODERATOR, PARTICIPANT };\n\nexport type RoleType = typeof ROLE.ADMIN | typeof ROLE.MODERATOR | typeof ROLE.PARTICIPANT;\n\nexport interface User {\n  id: GuidType;\n  login: string;\n  role: RoleType;\n}\n\n/*\n  User models -- end\n*/\n","import React from 'react';\n\nimport { CollectionReference, DocumentReference } from '@firebase/firestore-types';\nimport { firestore } from 'config/firebase';\n\nimport {\n  Document,\n  FILE_STATUS,\n  FILE_SYSTEM_ELEMENT,\n  FileSystemElement,\n  FileSystemElementType,\n  FileSystemNode,\n} from 'models';\n\ninterface Company {\n  uuid: string;\n}\n\ninterface Props {\n  activeCompany?: Company;\n}\n\ninterface State {\n  fsItems: Map<string, FileSystemElement>;\n  parentForCreateFromTemplate: FileSystemElement | null;\n  copiedElement: FileSystemElement | null;\n}\n\ninterface FSContextInterface {\n  fsItems: Map<string, FileSystemElement>;\n  documents: CollectionReference;\n  copiedElement: FileSystemElement | null;\n  parentForCreateFromTemplate: FileSystemElement | null;\n  setParentForCreateFromTemplate: (parent: FileSystemElement) => void;\n  getFolderElementsTreeById: (id: string, type?: FileSystemElementType) => FileSystemNode[];\n  getFolderElementsById: (id: string, type?: FileSystemElementType) => FileSystemElement[];\n  getElement: (id?: string) => FileSystemElement | null;\n  commit: (id?: string) => Promise<void>;\n  rename: (data: FileSystemElement) => Promise<void>;\n  removeById: (id?: string) => Promise<void>;\n  createItem: (data: FileSystemElement) => Promise<DocumentReference>;\n  copyItem: (copyData: FileSystemElement) => void;\n  pasteItem: (parentId: string) => Promise<DocumentReference | void>;\n}\nconst mockFn: any = () => {};\n\nconst documents = firestore.collection('documents');\n\nexport const FSContext = React.createContext<FSContextInterface>({\n  fsItems: new Map<string, FileSystemElement>(),\n  documents,\n  parentForCreateFromTemplate: null,\n  copiedElement: null,\n  setParentForCreateFromTemplate: mockFn,\n  getFolderElementsTreeById: mockFn,\n  getFolderElementsById: mockFn,\n  getElement: mockFn,\n  commit: mockFn,\n  rename: mockFn,\n  removeById: mockFn,\n  createItem: mockFn,\n  copyItem: mockFn,\n  pasteItem: mockFn,\n});\n\nexport class FSProvider extends React.PureComponent<Props, State> {\n  state: State = {\n    fsItems: new Map<string, FileSystemElement>(),\n    parentForCreateFromTemplate: null,\n    copiedElement: null,\n  };\n\n  collection = firestore.collection('folders');\n\n  componentDidMount() {\n    this.subscribe();\n  }\n\n  componentWillReceiveProps(nextProps: Readonly<Props>) {\n    this.subscribe();\n  }\n\n  componentWillUnmount() {\n    this.unsubscribe();\n  }\n\n  render() {\n    const { fsItems, copiedElement, parentForCreateFromTemplate } = this.state;\n\n    return (\n      <FSContext.Provider\n        value={{\n          fsItems,\n          documents,\n          copiedElement,\n          parentForCreateFromTemplate,\n          setParentForCreateFromTemplate: this.setParentForCreateFromTemplate,\n          getFolderElementsTreeById: this.getFolderElementsTreeById,\n          getFolderElementsById: this.getFolderElementsById,\n          getElement: this.getElement,\n          commit: this.commit,\n          rename: this.rename,\n          copyItem: this.copyItem,\n          createItem: this.createItem,\n          pasteItem: this.pasteItem,\n          removeById: this.removeById,\n        }}\n      >\n        {this.props.children}\n      </FSContext.Provider>\n    );\n  }\n\n  protected subscribe() {\n    this.unsubscribe();\n    this.unsubscribe = this.collection.onSnapshot(querySnapshot => {\n      const map = new Map<string, FileSystemElement>();\n      // todo consider docChanges\n      // https://firebase.google.com/docs/firestore/query-data/listen#view_changes_between_snapshots\n      querySnapshot.forEach(doc => {\n        const data: FileSystemElement = doc.data() as any;\n        data.id = doc.id;\n        map.set(doc.id, data);\n      });\n      this.setState({ fsItems: map });\n    });\n  }\n\n  protected unsubscribe: () => void = () => {};\n\n  protected getFolderElementsTreeById = (\n    id: string,\n    type?: FileSystemElementType,\n  ): FileSystemNode[] => {\n    const elements = this.getFolderElementsById(id, type);\n\n    return elements.map<FileSystemNode>(element => {\n      if (!element.id) return element;\n      const children = this.getFolderElementsTreeById(element.id, type);\n      return children.length > 0 ? { ...element, children } : element;\n    });\n  };\n  protected getFolderElementsById = (\n    id: string,\n    type?: FileSystemElementType,\n  ): FileSystemElement[] => {\n    const items: FileSystemElement[] = [];\n\n    this.state.fsItems.forEach(value => {\n      const isNeededType = !type || (type && value.type === type);\n      if (value.parentId === id && isNeededType) items.push({ ...value });\n    });\n\n    return items;\n  };\n  protected getElement = (id?: string): FileSystemElement | null => {\n    if (!id) return null;\n\n    const element = this.state.fsItems.get(id);\n\n    return element || null;\n  };\n  protected commit = (id?: string): Promise<void> => {\n    return this.collection.doc(id).update({ status: FILE_STATUS.DOCUMENT__DONE });\n  };\n  protected rename = (data: FileSystemElement): Promise<void> => {\n    return this.collection.doc(data.id).update({ name: data.name });\n  };\n  protected removeById = (id?: string) => {\n    return this.collection.doc(id).delete();\n  };\n  protected createItem = async (data: FileSystemElement): Promise<DocumentReference> => {\n    try {\n      if (data.type === FILE_SYSTEM_ELEMENT.DOCUMENT) {\n        let newDocument: Document = {\n          name: data.name,\n          content: '[[]]',\n        };\n\n        if (data.formTemplate) {\n          const templateSnapshot = await documents.doc(data.documentId).get();\n          newDocument = templateSnapshot.data() as Document;\n          newDocument.name = data.name;\n        }\n\n        const docRef = await documents.add(newDocument);\n        data.documentId = docRef.id;\n      }\n\n      return await this.collection.add(data);\n    } catch (error) {\n      throw Error('File creation error ' + error);\n    }\n  };\n  protected copyItem = (data: FileSystemElement) => {\n    this.setState({ copiedElement: data });\n  };\n  protected pasteItem = async (parentId: string): Promise<DocumentReference | void> => {\n    const { copiedElement } = this.state;\n    if (!copiedElement) return;\n\n    const newElement: FileSystemElement = {\n      ...copiedElement,\n      parentId,\n    };\n\n    if (copiedElement.parentId === parentId) {\n      newElement.name = `copy_${newElement.name}`;\n    }\n\n    if (newElement.type === FILE_SYSTEM_ELEMENT.DOCUMENT) {\n      if (newElement.status === FILE_STATUS.DOCUMENT__DONE) {\n        newElement.status = FILE_STATUS.DOCUMENT_IN_PROGRESS;\n      }\n\n      newElement.formTemplate = true;\n    }\n\n    const docRef = await this.createItem(newElement);\n\n    this.setState({ copiedElement: null });\n\n    return docRef;\n  };\n  protected setParentForCreateFromTemplate = (parent: FileSystemElement) => {\n    this.setState({ parentForCreateFromTemplate: parent });\n  };\n}\n","import React, { FC, useContext } from 'react';\r\n\r\nimport { Link, RouteComponentProps } from 'react-router-dom';\r\n\r\nimport { Breadcrumb } from 'antd';\r\n\r\nimport { FSContext } from 'state/context';\r\n\r\nimport { Route } from 'antd/lib/breadcrumb/Breadcrumb';\r\nimport { FileSystemElement, GuidType } from 'models';\r\n\r\nimport './styles.css';\r\n\r\nexport interface BreadcrumbsProps extends RouteComponentProps<{ id: GuidType }> {}\r\n\r\nconst BreadcrumbComponent: FC<BreadcrumbsProps> = props => {\r\n  const { match } = props;\r\n  let { id } = match.params;\r\n\r\n  id = id || 'Root';\r\n\r\n  const { fsItems } = useContext(FSContext);\r\n\r\n  return (\r\n    <Breadcrumb\r\n      className=\"breadcrumb\"\r\n      itemRender={itemRender}\r\n      routes={getBreadcrumbList({ fsItems, id })}\r\n    />\r\n  );\r\n};\r\n\r\ninterface ListProps {\r\n  fsItems: Map<string, FileSystemElement>;\r\n  id: GuidType;\r\n}\r\n\r\nfunction getBreadcrumbList(props: ListProps): Route[] {\r\n  const list: Route[] = [];\r\n\r\n  let item = props.fsItems.get(props.id);\r\n\r\n  for (;;) {\r\n    if (!item) {\r\n      list.reverse();\r\n      break;\r\n    }\r\n\r\n    const { id, name, parentId } = item;\r\n\r\n    list.push({\r\n      path: `/dashboard/${id}`,\r\n      breadcrumbName: name,\r\n      children: [],\r\n    });\r\n\r\n    item = props.fsItems.get(parentId as GuidType);\r\n  }\r\n\r\n  return list;\r\n}\r\n\r\nfunction itemRender(route: Route, params: any, routes: Route[]): React.ReactNode {\r\n  const isLast = routes.indexOf(route) === routes.length - 1;\r\n\r\n  return isLast ? (\r\n    <span>{route.breadcrumbName}</span>\r\n  ) : (\r\n    <Link to={route.path}>{route.breadcrumbName}</Link>\r\n  );\r\n}\r\n\r\nexport { BreadcrumbComponent };\r\n","import { withRouter } from 'react-router';\r\nimport { BreadcrumbComponent } from './breadcrumb';\r\n\r\nexport const Breadcrumb = withRouter(BreadcrumbComponent);\r\n","import { FILE_SYSTEM_ELEMENT, FileSystemElementType } from 'models';\r\n\r\nconst EXPLORER = 'explorer';\r\nconst DOCUMENT = 'document';\r\nconst FOLDER = 'folder';\r\n\r\nexport const CONTEXT_MENU_ID = {\r\n  EXPLORER,\r\n  DOCUMENT,\r\n  FOLDER,\r\n};\r\n\r\nconst explorer = [\r\n  {\r\n    name: 'new folder',\r\n    value: 'new_folder',\r\n    icon: 'folder-add',\r\n  },\r\n  {\r\n    name: 'new file',\r\n    value: 'new_file',\r\n    icon: 'file-add',\r\n  },\r\n  {\r\n    name: 'past',\r\n    value: 'past',\r\n    icon: 'profile',\r\n  },\r\n];\r\n\r\nconst document = [\r\n  {\r\n    name: 'edit',\r\n    value: 'edit-template',\r\n    icon: 'edit',\r\n  },\r\n  {\r\n    name: 'info',\r\n    value: 'info',\r\n    icon: 'info-circle',\r\n  },\r\n  {\r\n    name: 'download',\r\n    value: 'download',\r\n    icon: 'cloud-download',\r\n  },\r\n  {\r\n    name: 'copy',\r\n    value: 'copy',\r\n    icon: 'copy',\r\n  },\r\n  {\r\n    name: 'commit',\r\n    value: 'commit',\r\n    icon: 'file-done',\r\n  },\r\n  {\r\n    name: 'rename',\r\n    value: 'rename',\r\n    icon: 'edit',\r\n  },\r\n  {\r\n    name: 'delete',\r\n    value: 'delete',\r\n    icon: 'delete',\r\n  },\r\n];\r\n\r\nconst folder = [\r\n  {\r\n    name: 'copy',\r\n    value: 'copy',\r\n    icon: 'copy',\r\n  },\r\n  {\r\n    name: 'rename',\r\n    value: 'rename',\r\n    icon: 'edit',\r\n  },\r\n  {\r\n    name: 'delete',\r\n    value: 'delete',\r\n    icon: 'delete',\r\n  },\r\n];\r\n\r\nexport const menus = [\r\n  {\r\n    data: explorer,\r\n    currentId: EXPLORER,\r\n  },\r\n  {\r\n    data: document,\r\n    currentId: DOCUMENT,\r\n  },\r\n  {\r\n    data: folder,\r\n    currentId: FOLDER,\r\n  },\r\n];\r\n\r\nconst contextMenuMap = {\r\n  [FILE_SYSTEM_ELEMENT.FOLDER]: FOLDER,\r\n  [FILE_SYSTEM_ELEMENT.DOCUMENT]: DOCUMENT,\r\n};\r\n\r\nexport const getContextMenuId = (type: FileSystemElementType): string => {\r\n  const contextMenu = contextMenuMap[type];\r\n\r\n  if (contextMenu) return contextMenu;\r\n\r\n  throw new Error('Error of FS element type: ' + type);\r\n};\r\n","import React, { CSSProperties, FC } from 'react';\r\n\r\nimport { View } from '@react-pdf/renderer';\r\n\r\nimport { BlockProps } from 'models';\r\n\r\nconst BlockPDF: FC<BlockProps> = props => {\r\n  const { style } = props;\r\n  return <View style={style as CSSProperties} />;\r\n};\r\n\r\nexport { BlockPDF };\r\n","import React, { CSSProperties, FC } from 'react';\r\n\r\nimport { BlockProps } from 'models';\r\n\r\nimport './styles.css';\r\n\r\nconst BlockView: FC<BlockProps> = props => {\r\n  const { style } = props;\r\n  return <div className=\"block-element\" style={style as CSSProperties} />;\r\n};\r\n\r\nexport { BlockView };\r\n","import React, { CSSProperties, FC } from 'react';\r\n\r\nimport { View } from '@react-pdf/renderer';\r\n\r\nimport { BorderProps } from 'models';\r\n\r\nconst BorderPDF: FC<BorderProps> = props => {\r\n  const { style } = props;\r\n  return <View style={style as CSSProperties} />;\r\n};\r\n\r\nexport { BorderPDF };\r\n","import React, { CSSProperties, FC } from 'react';\r\n\r\nimport { BorderProps } from 'models';\r\n\r\nimport './styles.css';\r\n\r\nconst BorderView: FC<BorderProps> = props => {\r\n  const { style } = props;\r\n  return <div className=\"border-element\" style={style as CSSProperties} />;\r\n};\r\n\r\nexport { BorderView };\r\n","import React, { FC } from 'react';\n\nimport { CellProps, CellStyle, CellStyles, CellType, ChangeTable, ElementStyle } from 'models';\n\nexport interface TableMembers {\n  header: string[];\n  body: string[][];\n  footer: string[];\n}\n\nexport interface Count {\n  current: number;\n  length: number;\n}\n\nexport interface CellPosition {\n  row: number;\n  column: number;\n}\n\nconst CELL_POSITION_SPLITTER = '-';\n\nconst DEFAULT_PROPS = {\n  FONT_SIZE: 12,\n  HEADER_BG_COLOR: '#ccc',\n  BODY_BG_COLOR: '#fff',\n  FOOTER_BG_COLOR: '#ccc',\n  CELL_PADDING: '2pt 6pt',\n  BORDER_WIDTH: '1pt',\n  BORDER_COLOR: '#000',\n  BORDER_STYLE: 'solid',\n};\n\nconst DEFAULT_BORDER = `${DEFAULT_PROPS.BORDER_WIDTH} ${DEFAULT_PROPS.BORDER_STYLE} ${\n  DEFAULT_PROPS.BORDER_COLOR\n}`;\n\nexport const getCellPositionFromId = (id: string): CellPosition => {\n  const [row, column] = id.split(CELL_POSITION_SPLITTER);\n  return { row: +row, column: +column };\n};\n\nexport const getIdFromCellPosition = ({ row, column }: CellPosition): string =>\n  `${row}${CELL_POSITION_SPLITTER}${column}`;\n\nconst getCellStyle = (row: number, column: number, styles: CellStyles): CellStyle => {\n  const id = getIdFromCellPosition({ row, column });\n  const style = styles[id];\n  return style || {};\n};\n\nconst getBorderStyle = (row: Count, column: Count, style?: string): ElementStyle => {\n  style = style || DEFAULT_BORDER;\n  const border: ElementStyle = {};\n\n  const isLastRow = row.current + 1 === row.length;\n  const isLastColumn = column.current + 1 === column.length;\n\n  if (!isLastRow) border.borderBottom = style;\n  if (!isLastColumn) border.borderRight = style;\n\n  return border;\n};\n\nexport const baseTableStyles = {\n  table: {\n    display: 'flex',\n    flexDirection: 'column',\n    border: DEFAULT_BORDER,\n    backgroundColor: DEFAULT_PROPS.BODY_BG_COLOR,\n    fontSize: DEFAULT_PROPS.FONT_SIZE,\n  },\n  header: {\n    display: 'flex',\n    flexDirection: 'row',\n    backgroundColor: DEFAULT_PROPS.HEADER_BG_COLOR,\n    fontWeight: 'bold',\n  },\n  footer: {\n    display: 'flex',\n    flexDirection: 'row',\n    backgroundColor: DEFAULT_PROPS.FOOTER_BG_COLOR,\n  },\n  row: {\n    display: 'flex',\n    flexDirection: 'row',\n  },\n  cell: {\n    display: 'flex',\n    padding: DEFAULT_PROPS.CELL_PADDING,\n  },\n};\n\nexport const getTableMembers = (data: string[][], hasFooter: boolean = false): TableMembers => {\n  const [header, ...other] = data;\n  const footer: string[] = hasFooter ? other.pop() || [] : [];\n\n  return { header, body: other, footer };\n};\n\nexport const cellRender = (\n  defaultColumnWidth: number,\n  defaultCellStyle: ElementStyle,\n  cellsStyle: CellStyles,\n  CellComponent: FC<CellProps>,\n  changeTable?: ChangeTable,\n  isActive?: boolean,\n  isDone?: boolean,\n  actions?: {\n    addColSpan: (row: number, column: number) => void;\n    removeColumnFromTableElement: (column: number) => void;\n  },\n) => (data: string[], rowIndex: number, rowsLength: number, cellType: CellType) => (\n  cell: string,\n  cellIndex: number,\n) => {\n  const rowCount: Count = { current: rowIndex, length: rowsLength };\n  const columnCount: Count = { current: cellIndex, length: data.length };\n\n  const { colSpan = 1, style = {} } = getCellStyle(\n    rowIndex + (cellType === 'body' ? 1 : 0),\n    cellIndex,\n    cellsStyle,\n  );\n\n  const { borderWidth, borderStyle, borderColor, ...defaultStyle } = defaultCellStyle;\n\n  let defaultBorderStyle;\n  if (borderWidth && borderStyle && borderColor) {\n    defaultBorderStyle = `${borderWidth} ${borderStyle} ${borderColor}`;\n  }\n\n  const resultStyle = {\n    width: `${defaultColumnWidth * colSpan}%`,\n    ...defaultStyle,\n    ...getBorderStyle(rowCount, columnCount, defaultBorderStyle),\n    ...style,\n  };\n\n  const cellComponent: JSX.Element = (\n    <CellComponent\n      key={cellIndex}\n      style={resultStyle}\n      value={cell}\n      isActive={isActive}\n      isDone={isDone}\n      row={rowCount.current + (cellType === 'body' ? 1 : 0)}\n      column={columnCount.current}\n      cellType={cellType}\n      changeTable={changeTable}\n      actions={actions}\n    />\n  );\n\n  return cellComponent;\n};\n","import React, { FC } from 'react';\n\nimport { StyleSheet, Text, View } from '@react-pdf/renderer';\n\nimport { CellProps, TableProps } from 'models';\n\nimport { baseTableStyles, cellRender, getTableMembers } from './helpers';\n\nconst defaultStyles: any = StyleSheet.create(baseTableStyles);\n\nconst TableCell: FC<CellProps> = props => {\n  const { value, style } = props;\n\n  return (\n    <View style={style}>\n      {/* <Text style={{ textWrap: 'nowrap', textOverflow: 'ellipsis', maxLines: 1 }}>{value}</Text> */}\n      <Text>{value}</Text>\n    </View>\n  );\n};\n\nconst TablePDF: FC<TableProps> = props => {\n  const { data, hasFooter = false, style = {}, cellsStyle = {} } = props;\n  const { header, body, footer } = getTableMembers(data, hasFooter);\n\n  const defaultColumnWidth = 100 / header.length;\n  const height = data.length;\n\n  const render = cellRender(\n    defaultColumnWidth,\n    {\n      ...defaultStyles.cell,\n      ...{\n        backgroundColor: style.backgroundColor,\n        borderWidth: style.borderWidth,\n        borderStyle: style.borderStyle,\n        borderColor: style.borderColor,\n      },\n    },\n    cellsStyle,\n    TableCell,\n  );\n\n  return (\n    <View style={{ ...defaultStyles.table, ...style }}>\n      <View style={defaultStyles.header}>{header.map(render(header, 0, height, 'header'))}</View>\n\n      {body.map((rows, rowIndex) => (\n        <View style={{ ...defaultStyles.row, height: 25 }} key={rowIndex}>\n          {rows.map(render(rows, rowIndex, height, 'body'))}\n        </View>\n      ))}\n\n      {footer.length ? (\n        <View style={defaultStyles.footer}>\n          {footer.map(render(footer, height - 1, height, 'footer'))}\n        </View>\n      ) : null}\n    </View>\n  );\n};\n\nexport { TablePDF };\n","import { useState } from 'react';\r\n\r\nexport type ModalState<T> = {\r\n  open: boolean;\r\n  title?: string;\r\n  target?: T;\r\n  content?: any;\r\n};\r\n\r\nexport interface ModalActions<T> {\r\n  setModalState: (nextState: ModalState<T>) => void;\r\n  closeModal: () => void;\r\n}\r\n\r\nconst initialState: ModalState<any> = {\r\n  open: false,\r\n  title: '',\r\n  target: null,\r\n  content: null,\r\n};\r\n\r\nexport function useModal<T>(): [ModalState<T>, ModalActions<T>] {\r\n  const [state, setState] = useState<ModalState<T>>(initialState);\r\n\r\n  const setModalState = (nextState: ModalState<T>) => {\r\n    setState(nextState);\r\n  };\r\n\r\n  const closeModal = () => {\r\n    setState({ ...initialState });\r\n  };\r\n\r\n  return [\r\n    state,\r\n    {\r\n      setModalState,\r\n      closeModal,\r\n    },\r\n  ];\r\n}\r\n","import { useContext } from 'react';\r\n\r\nimport { FILE_STATUS, GuidType } from 'models';\r\n\r\nimport { FSContext } from 'state/context';\r\n\r\nexport function useFileSystem(folderId: GuidType) {\r\n  const { fsItems, ...other } = useContext(FSContext);\r\n\r\n  const items = other.getFolderElementsById(folderId);\r\n\r\n  const defaultFolders = items.filter(item => item.isDefault);\r\n  const progress = items.filter(item => item.status === FILE_STATUS.DOCUMENT_IN_PROGRESS);\r\n  const body = items.filter(\r\n    item => item.status !== FILE_STATUS.DOCUMENT_IN_PROGRESS && !item.isDefault,\r\n  );\r\n\r\n  return {\r\n    items,\r\n    elements: [defaultFolders, progress, body],\r\n    ...other,\r\n  };\r\n}\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read http://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/),\r\n);\r\n\r\ninterface Config {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n}\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(\r\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\r\n      window.location.href,\r\n    );\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          // tslint:disable-next-line: no-console\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit http://bit.ly/CRA-PWA',\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              // tslint:disable-next-line: no-console\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.',\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              // tslint:disable-next-line: no-console\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      // tslint:disable-next-line: no-console\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      // tslint:disable-next-line: no-console\r\n      console.log('No internet connection found. App is running in offline mode.');\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","export function deepClone<T>(obj: T): T {\r\n  if (typeof obj !== 'object') throw Error('Is not an object: ' + obj);\r\n\r\n  const serialized: string = JSON.stringify(obj);\r\n\r\n  try {\r\n    return JSON.parse(serialized);\r\n  } catch (error) {\r\n    throw Error('Error when cloning: ' + error);\r\n  }\r\n}\r\n","import { useContext, useEffect, useState } from 'react';\n\nimport { elements } from 'components/elements';\n\nimport { FSContext } from 'state/context';\n\nimport {\n  Document,\n  DocumentPage,\n  ElementType,\n  ElementUnion,\n  FILE_STATUS,\n  FileSystemElement,\n  Position,\n  TableElement,\n  TextElement,\n} from 'models';\n\nimport { getIdFromCellPosition } from 'components/elements/table/helpers';\nimport { deepClone } from 'utils';\n\nconst maxX: number = 595.28;\nconst maxY: number = 841.89;\n\nconst removeCallback = (removeIndex: number) => (_: any, index: number) => index !== removeIndex;\n\ninterface EditorState {\n  document: FileSystemElement | null;\n  activeElement: ElementUnion | null;\n  pages: DocumentPage[];\n  isDone: boolean;\n  showPreview: boolean;\n  actions: EditorActions;\n  activeId: any;\n  drawerVisible: boolean;\n  preview: boolean;\n}\n\nexport interface EditorActions {\n  addPage: () => void;\n  showPreviewHandler: () => void;\n  deletePage: (pageIndex: number) => void;\n  addElement: (pageIndex: number, type: ElementType, position: Position, value?: string) => void;\n  changeElement: (pageIndex: number, elementIndex: number, element: ElementUnion) => void;\n  deleteElement: (pageIndex: number, elementIndex: number) => void;\n  setActiveElement: (element: ElementUnion) => void;\n  resetActiveElement: () => void;\n  isElementActive: (element: ElementUnion) => boolean;\n  addRowToTableElement: (pageIndex: number, elementIndex: number, element: TableElement) => void;\n  addColumnToTableElement: (pageIndex: number, elementIndex: number, element: TableElement) => void;\n  addColSpan: (\n    pageIndex: number,\n    elementIndex: number,\n    element: TableElement,\n    row: number,\n    column: number,\n  ) => void;\n  removeRowFromTableElement: (\n    pageIndex: number,\n    elementIndex: number,\n    element: TableElement,\n    row: number,\n  ) => void;\n  removeColumnFromTableElement: (\n    pageIndex: number,\n    elementIndex: number,\n    element: TableElement,\n    column: number,\n  ) => void;\n  togglePreview: () => void;\n  closeDrawer: () => void;\n  showDrawer: () => void;\n  addImage: (pageIndex: number, type: ElementType, position: Position) => void;\n  handleChangeText: (\n    pageIndex: number,\n    elementIndex: number,\n    value: string,\n    element: TextElement,\n  ) => void;\n  changeTextStyle: (\n    pageIndex: number,\n    elementIndex: number,\n    style: string,\n    value: string,\n    element: TextElement,\n  ) => void;\n  handleChangeSettings: (\n    pageIndex: number,\n    elementIndex: number,\n    style: string,\n    value: string,\n    type: string,\n    element: ElementUnion,\n  ) => void;\n  setActiveId: (page: number, id: number) => void;\n  resetActiveId: () => void;\n}\n\nexport interface EditorProps {\n  fsElementId: string | undefined;\n}\n\nlet saveIntervalId: any;\n\nconst pagesKey = Symbol('pages');\n\nexport function useEditor(props: EditorProps): EditorState {\n  const { getElement, documents } = useContext(FSContext);\n  const fsElement = getElement(props.fsElementId);\n\n  const isDone = !!fsElement && fsElement.status === FILE_STATUS.DOCUMENT__DONE;\n\n  const [pages, setPages] = useState<DocumentPage[]>([[]]);\n\n  // FIXME: solve LexicalEnvironment issue with refs\n  (window as any)[pagesKey] = pages;\n\n  useEffect(() => {\n    if (!fsElement) return;\n\n    const unsubscribe = documents.doc(fsElement.documentId).onSnapshot(querySnapshot => {\n      console.log('subscribe');\n      const document = querySnapshot.data() as Document;\n      const content: DocumentPage[] = JSON.parse(document.content);\n      if (Array.isArray(content)) setPages(content);\n    });\n\n    saveIntervalId = setInterval(() => {\n      const content = JSON.stringify((window as any)[pagesKey]);\n      documents.doc(fsElement.documentId).update({ content });\n      console.log('Document was updated');\n    }, 5000);\n\n    return () => {\n      unsubscribe();\n      clearInterval(saveIntervalId);\n      console.log('unsubscribe');\n    };\n  }, [fsElement, documents]);\n\n  const addPage = () => setPages([...pages, []]);\n\n  const deletePage = (pageIndex: number) => {\n    setPages(pages.filter(removeCallback(pageIndex)));\n  };\n\n  // tslint:disable-next-line: variable-name\n  const [activeElement, _setActiveElement] = useState<ElementUnion | null>(null);\n\n  const resetActiveElement = () => _setActiveElement(null);\n  const isElementActive = (element: ElementUnion): boolean => {\n    return !!activeElement && activeElement.id === element.id;\n  };\n  const setActiveElement = (element: ElementUnion) => {\n    if (isElementActive(element)) {\n      resetActiveElement();\n    } else {\n      _setActiveElement(element);\n    }\n  };\n  // tslint:disable-next-line: variable-name\n  const [activeId, _setActiveId] = useState<{ page: number; id: number } | null>(null);\n\n  const setActiveId = (page: number, id: number) => _setActiveId({ page, id });\n  const resetActiveId = () => _setActiveId(null);\n\n  const addElement = (pageIndex: number, type: ElementType, position: Position, value?: string) => {\n    const element = deepClone<ElementUnion>(elements[type].element);\n    if (!element) throw new Error('Unknown element type: ' + type);\n    const zoom: any = (window.screen.pixelDepth / 10) * 2;\n    const { size } = element;\n    const x = maxX < position.x + size.width ? maxX - size.width : position.x / zoom;\n    const y = maxY < position.y + size.height ? maxY - size.height : position.y / zoom;\n    element.position = { x, y };\n    element.id = `f${(+new Date()).toString(16)}`;\n    if (value && 'value' in element) {\n      element.value = value;\n    }\n\n    const page: DocumentPage = pages[pageIndex];\n    pages[pageIndex] = [...page, element];\n    setPages([...pages]);\n  };\n\n  const deleteElement = (pageIndex: number, elementIndex: number) => {\n    pages[pageIndex] = pages[pageIndex].filter(removeCallback(elementIndex));\n    setPages([...pages]);\n  };\n\n  const changeElement = (pageIndex: number, elementIndex: number, element: ElementUnion) => {\n    pages[pageIndex][elementIndex] = { ...element } as ElementUnion;\n    setPages([...pages]);\n  };\n\n  const addRowToTableElement = (pageIndex: number, elementIndex: number, element: TableElement) => {\n    const { data, hasFooter } = element;\n    const insertIndex: number = data.length - (hasFooter ? 1 : 0);\n    const columns = data[insertIndex].map(_ => 'cell');\n    element.data.splice(insertIndex, 0, columns);\n    changeElement(pageIndex, elementIndex, element);\n  };\n\n  const addColumnToTableElement = (\n    pageIndex: number,\n    elementIndex: number,\n    element: TableElement,\n  ) => {\n    const { data } = element;\n    element.data = data.map(page => [...page, 'cell']);\n    changeElement(pageIndex, elementIndex, element);\n  };\n\n  const addColSpan = (\n    pageIndex: number,\n    elementIndex: number,\n    element: TableElement,\n    row: number,\n    column: number,\n  ) => {\n    if (!element.cellsStyle) {\n      throw new Error('Error: Table has not cell styles');\n    }\n\n    const data = deepClone(element.data);\n    data[row].splice(column + 1, 1);\n\n    const cellId = getIdFromCellPosition({ row, column });\n    element.cellsStyle[cellId] = element.cellsStyle[cellId] || {};\n    const prevColspan = element.cellsStyle[cellId].colSpan || 1;\n\n    element.cellsStyle[cellId] = {\n      colSpan: prevColspan + 1,\n      style: {\n        ...element.cellsStyle[cellId].style,\n      },\n    };\n\n    element.data = data;\n\n    changeElement(pageIndex, elementIndex, element);\n  };\n\n  const removeRowFromTableElement = (\n    pageIndex: number,\n    elementIndex: number,\n    element: TableElement,\n    row: number,\n  ) => {\n    const data = deepClone(element.data);\n    data.splice(row, 1);\n    element.data = data;\n    changeElement(pageIndex, elementIndex, element);\n  };\n\n  const removeColumnFromTableElement = (\n    pageIndex: number,\n    elementIndex: number,\n    element: TableElement,\n    column: number,\n  ) => {\n    const data = deepClone(element.data);\n    data.forEach(row => row.splice(column, 1));\n    element.data = data;\n    changeElement(pageIndex, elementIndex, element);\n  };\n\n  const handleChangeText = (\n    pageIndex: number,\n    elementIndex: number,\n    value: string,\n    element: TextElement,\n  ) => {\n    element.value = value;\n    changeElement(pageIndex, elementIndex, element);\n  };\n\n  const changeTextStyle = (\n    pageIndex: number,\n    elementIndex: number,\n    style: string,\n    value: string,\n    element: any,\n  ) => {\n    if (element.style[style] === 'underline') {\n      value = 'none';\n    }\n    if (element.style[style] === 'italic') {\n      value = 'normal';\n    }\n    if (element.style[style] === 'bold') {\n      value = 'normal';\n    }\n    if (style === 'fontSize') {\n      value = `${value}pt`;\n    }\n\n    element.style[style] = value;\n    changeElement(pageIndex, elementIndex, element);\n  };\n\n  const handleChangeSettings = (\n    pageIndex: number,\n    elementIndex: number,\n    style: string,\n    value: string,\n    type: string,\n  ) => {\n    const element: any = deepClone(activeElement);\n    element[type][style] = value;\n    changeElement(pageIndex, elementIndex, element);\n  };\n\n  const addImage = (pageIndex: number, type: ElementType, position: Position) => {\n    const input = document.createElement('input');\n    input.type = 'file';\n\n    let file: any = {};\n    let result: string = '';\n\n    input.onchange = (e: any) => {\n      const reader = new FileReader();\n\n      file = e.target.files[0];\n      // tslint:disable-next-line:only-arrow-functions\n      reader.onload = function(a: any) {\n        result = a.target.result;\n        addElement(pageIndex, type, position, result);\n      };\n      reader.readAsDataURL(file);\n    };\n    input.click();\n  };\n\n  const [showPreview, setShowPreview] = useState(false);\n\n  const togglePreview = () => setShowPreview(!showPreview);\n\n  const [drawerVisible, setDrawerVisible] = useState(false);\n  const showDrawer = () => setDrawerVisible(true);\n  const closeDrawer = () => setDrawerVisible(false);\n\n  const [preview, setPreview] = useState(false);\n  const showPreviewHandler = () => setPreview(!preview);\n\n  return {\n    document: fsElement,\n    activeId,\n    activeElement,\n    pages,\n    isDone,\n    preview,\n    showPreview,\n    drawerVisible,\n    actions: {\n      showPreviewHandler,\n      addPage,\n      deletePage,\n      addElement,\n      changeElement,\n      deleteElement,\n      setActiveElement,\n      resetActiveElement,\n      isElementActive,\n      addRowToTableElement,\n      addColumnToTableElement,\n      addColSpan,\n      removeRowFromTableElement,\n      removeColumnFromTableElement,\n      togglePreview,\n      handleChangeText,\n      changeTextStyle,\n      setActiveId,\n      resetActiveId,\n      handleChangeSettings,\n      addImage,\n      showDrawer,\n      closeDrawer,\n    },\n  };\n}\n","import createUseContext from 'constate';\n\nimport { useEditor } from 'hooks';\n\nexport const useEditorContext = createUseContext(useEditor);\n","import React, { CSSProperties, FC, useEffect, useRef, useState } from 'react';\n\nimport { Button, Form, Icon, Input, Tooltip } from 'antd';\n\nimport { CellProps, ChangeTable, TableProps } from 'models';\n\nimport { baseTableStyles, cellRender, getTableMembers } from './helpers';\n\nimport { useEditorContext } from 'state/editor';\nimport './styles.css';\n\ninterface TableViewProps extends TableProps {\n  innerRef: any;\n  changeTable: ChangeTable;\n  actions: {\n    addColSpan: (row: number, column: number) => void;\n    addRowToTableElement: () => void;\n    addColumnToTableElement: () => void;\n    removeRowFromTableElement: (row: number) => void;\n    removeColumnFromTableElement: (column: number) => void;\n  };\n  isActive: boolean;\n  isDone: boolean;\n  preview: boolean;\n}\n\nconst defaultStyles: any = baseTableStyles;\n\nconst TableCell: FC<CellProps> = props => {\n  const { preview } = useEditorContext();\n  const { value, style, isActive, isDone, row, column, changeTable, cellType } = props;\n  const [isEditable, setIsEditable] = useState(false);\n  const toggleEditability = () => setIsEditable(!isEditable);\n\n  const inputRef = useRef<HTMLInputElement>();\n\n  useEffect(() => {\n    if (isEditable && inputRef && inputRef.current) {\n      inputRef.current.focus();\n    }\n  }, [isEditable]);\n\n  const onClick = () => {\n    if (isActive && !isDone) toggleEditability();\n  };\n\n  const save = (ev: any) => {\n    if (changeTable) changeTable(row, column, ev.target.value);\n    toggleEditability();\n  };\n\n  const className = cellType === 'header' ? 'cell header-cell' : 'cell';\n\n  const removeColumn = () => {\n    if (!props.actions) return;\n    props.actions.removeColumnFromTableElement(column);\n  };\n\n  const addColSpan = () => {\n    if (!props.actions) return;\n    props.actions.addColSpan(row, column);\n  };\n\n  return isEditable ? (\n    <div className={className} style={style as CSSProperties}>\n      <Form.Item className=\"cell-input\">\n        <Input.TextArea\n          ref={inputRef as any}\n          autosize={true}\n          defaultValue={value}\n          onPressEnter={save}\n          onBlur={save}\n        />\n      </Form.Item>\n    </div>\n  ) : (\n    <div className={className} style={style as CSSProperties} onClick={onClick}>\n      {cellType === 'header' && !preview && !isDone && (\n        <div className=\"header-actions\">\n          <Tooltip placement=\"top\" title=\"delete column\">\n            <Button type=\"danger\" icon=\"close\" size=\"small\" shape=\"circle\" onClick={removeColumn} />\n          </Tooltip>\n        </div>\n      )}\n      {!isDone && (\n        <div className=\"cell-actions\">\n          <Tooltip placement=\"top\" title=\"combine with next cell\">\n            <Icon type=\"right-circle\" theme=\"filled\" onClick={addColSpan} />\n          </Tooltip>\n        </div>\n      )}\n      <span>{value}</span>\n    </div>\n  );\n};\n\nconst TableView: FC<TableViewProps> = props => {\n  const {\n    data,\n    hasFooter = false,\n    style = {},\n    cellsStyle = {},\n    innerRef,\n    changeTable,\n    actions,\n    isActive,\n    isDone,\n    preview,\n  } = props;\n\n  const { header, body, footer } = getTableMembers(data, hasFooter);\n\n  const defaultColumnWidth = 100 / header.length;\n  const height = data.length;\n  const render = cellRender(\n    defaultColumnWidth,\n    {\n      ...defaultStyles.cell,\n      ...{\n        backgroundColor: style.backgroundColor,\n        borderWidth: style.borderWidth,\n        borderStyle: style.borderStyle,\n        borderColor: style.borderColor,\n      },\n    },\n    cellsStyle,\n    TableCell,\n    changeTable,\n    isActive,\n    isDone,\n    actions,\n  );\n\n  return (\n    <>\n      {!preview && !isDone && (\n        <div className=\"table-element-controls\">\n          <Tooltip placement=\"right\" title=\"add row\">\n            <Button\n              icon=\"arrow-down\"\n              size=\"small\"\n              shape=\"circle\"\n              onClick={actions.addRowToTableElement}\n            />\n          </Tooltip>\n          <Tooltip placement=\"right\" title=\"add column\">\n            <Button\n              icon=\"arrow-right\"\n              size=\"small\"\n              shape=\"circle\"\n              onClick={actions.addColumnToTableElement}\n            />\n          </Tooltip>\n        </div>\n      )}\n\n      <div ref={innerRef} className=\"table-element\" style={{ ...defaultStyles.table, ...style }}>\n        <div style={defaultStyles.header}>{header.map(render(header, 0, height, 'header'))}</div>\n\n        {body.map((rows, rowIndex) => (\n          <div className=\"row\" style={defaultStyles.row} key={rowIndex}>\n            {!preview && !isDone && (\n              <div className=\"row-actions\">\n                <Tooltip placement=\"left\" title=\"delete row\">\n                  <Button\n                    type=\"danger\"\n                    icon=\"close\"\n                    size=\"small\"\n                    shape=\"circle\"\n                    onClick={() => actions.removeRowFromTableElement(rowIndex)}\n                  />\n                </Tooltip>\n              </div>\n            )}\n            {rows.map(render(rows, rowIndex, height, 'body'))}\n          </div>\n        ))}\n\n        {footer.length ? (\n          <div style={defaultStyles.footer}>\n            {footer.map(render(footer, height - 1, height, 'footer'))}\n          </div>\n        ) : null}\n      </div>\n    </>\n  );\n};\n\nexport { TableView };\n","import React, { CSSProperties, FC } from 'react';\r\n\r\nimport { Text, View } from '@react-pdf/renderer';\r\n\r\nimport { TextProps } from 'models';\r\n\r\ninterface TextPropsComponent extends TextProps {\r\n  value?: string;\r\n}\r\n\r\nconst TextPDF: FC<TextPropsComponent> = props => {\r\n  const { style, value } = props;\r\n  return (\r\n    <View style={style as CSSProperties}>\r\n      <Text>{value}</Text>\r\n    </View>\r\n  );\r\n};\r\n\r\nexport { TextPDF };\r\n","import { Input } from 'antd';\r\nimport { TextProps } from 'models';\r\nimport React, { CSSProperties, FC } from 'react';\r\nimport './styles.css';\r\n\r\nconst { TextArea } = Input;\r\n\r\ninterface TextViewProps extends TextProps {\r\n  isActive: boolean;\r\n  value?: string;\r\n  handleChangeText: (value: string) => void;\r\n}\r\n\r\nconst TextView: FC<TextViewProps> = props => {\r\n  const { style, isActive, handleChangeText, value } = props;\r\n  return (\r\n    <div className=\"text-element\">\r\n      {isActive ? (\r\n        <TextArea\r\n          autosize={true}\r\n          value={value}\r\n          style={{ ...(style as CSSProperties), minHeight: '100%' }}\r\n          onChange={(e: any) => handleChangeText(e.target.value)}\r\n        />\r\n      ) : (\r\n        <div style={{ ...(style as CSSProperties) }}>{value}</div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport { TextView };\r\n","import React, { CSSProperties, FC } from 'react';\n\nimport { Image, View } from '@react-pdf/renderer';\n\nimport { ImageProps } from 'models';\n\ninterface ImagePropsComponent extends ImageProps {\n  value?: string;\n}\n\nconst ImagePDF: FC<ImagePropsComponent> = props => {\n  const { style, value } = props;\n  return (\n    <View style={style as CSSProperties}>\n      <Image src={value || ''} />\n    </View>\n  );\n};\n\nexport { ImagePDF };\n","import React, { FC } from 'react';\n\nimport { ImageProps } from 'models';\n\nimport './styles.css';\n\ninterface ImageViewProps extends ImageProps {\n  value?: string;\n}\n\nconst ImageView: FC<ImageViewProps> = props => {\n  const { value } = props;\n\n  return (\n    <div\n      style={{\n        width: '100%',\n        height: '100%',\n        background: `url(${value}) no-repeat`,\n        backgroundSize: '100% 100%',\n      }}\n    />\n  );\n};\n\nexport { ImageView };\n","import {\n  BlockElement,\n  BorderElement,\n  ELEMENT,\n  ElementControl,\n  ImageElement,\n  TableElement,\n  TextElement,\n} from 'models';\nconst textElement: TextElement = {\n  id: 'default-text',\n  type: ELEMENT.TEXT,\n  position: { x: 0, y: 0 },\n  size: { width: 200, height: 200 },\n  style: { fontSize: '16pt', color: '#000' },\n  value: 'Text',\n};\n\nconst imageElement: ImageElement = {\n  id: 'default-image',\n  type: ELEMENT.IMAGE,\n  position: { x: 0, y: 0 },\n  size: { width: 200, height: 200 },\n  style: { backgroundColor: 'black' },\n  value: '',\n};\n\nconst blockElement: BlockElement = {\n  id: 'default-block',\n  type: ELEMENT.BLOCK,\n  position: { x: 0, y: 0 },\n  size: { width: 200, height: 200 },\n  style: { backgroundColor: '#000' },\n};\n\nconst borderElement: BorderElement = {\n  id: 'default-border',\n  type: ELEMENT.BORDER,\n  position: { x: 0, y: 0 },\n  size: { width: 200, height: 200 },\n  style: { borderWidth: '1pt', borderColor: '#000', borderStyle: 'solid' },\n};\n\nconst tableElement: TableElement = {\n  id: 'default-table',\n  type: ELEMENT.TABLE,\n  position: { x: 0, y: 0 },\n  size: { width: 200, height: 100 },\n  style: {\n    backgroundColor: 'white',\n    borderWidth: '1pt',\n    borderColor: '#000',\n    borderStyle: 'solid',\n  },\n  cellsStyle: {},\n  hasFooter: true,\n  data: [\n    ['header 1', 'header 2'],\n    ['cell 1', 'cell 2'],\n    ['cell 3', 'cell 4'],\n    ['cell 5', 'cell 6'],\n    ['cell 3', 'cell 7'],\n  ],\n};\n\nexport const elements: { [key: string]: ElementControl } = {\n  [ELEMENT.TEXT]: {\n    control: {\n      name: 'Text',\n      icon: 'font-size',\n      type: ELEMENT.TEXT,\n    },\n    element: textElement,\n  },\n  [ELEMENT.BLOCK]: {\n    control: {\n      name: 'Block',\n      icon: 'block',\n      type: ELEMENT.BLOCK,\n    },\n    element: blockElement,\n  },\n  [ELEMENT.BORDER]: {\n    control: {\n      name: 'Border',\n      icon: 'border',\n      type: ELEMENT.BORDER,\n    },\n    element: borderElement,\n  },\n  [ELEMENT.IMAGE]: {\n    control: {\n      name: 'Image',\n      icon: 'picture',\n      type: ELEMENT.IMAGE,\n    },\n    element: imageElement,\n  },\n  [ELEMENT.TABLE]: {\n    control: {\n      name: 'Table',\n      icon: 'table',\n      type: ELEMENT.TABLE,\n    },\n    element: tableElement,\n  },\n};\n\nexport * from './block';\nexport * from './border';\nexport * from './table';\nexport * from './text';\nexport * from './image';\n","import React, { FC } from 'react';\n\nimport { Document, Page } from '@react-pdf/renderer';\n\nimport { BlockPDF, BorderPDF, ImagePDF, TablePDF, TextPDF } from 'components/elements';\n\nimport { DocumentPage, ELEMENT } from 'models';\n\nexport interface DocumentPDFProps {\n  pages: DocumentPage[];\n}\n\nconst DocumentPDF: FC<DocumentPDFProps> = props => {\n  const { pages } = props;\n\n  return (\n    <Document>\n      {pages.map((page, key) => (\n        <Page key={key}>\n          {page.map((element, elementKey) => {\n            const style: any = {\n              position: 'absolute',\n              top: element.position.y,\n              left: element.position.x,\n              width: element.size.width,\n              height: element.size.height,\n              ...element.style,\n            };\n\n            if (element.type === ELEMENT.BLOCK) {\n              return <BlockPDF key={elementKey} style={style} />;\n            }\n\n            if (element.type === ELEMENT.BORDER) {\n              return <BorderPDF key={elementKey} style={style} />;\n            }\n\n            if (element.type === ELEMENT.TEXT && 'value' in element) {\n              return <TextPDF key={elementKey} style={style} value={element.value} />;\n            }\n\n            if (element.type === ELEMENT.IMAGE && 'value' in element) {\n              return <ImagePDF key={elementKey} style={style} value={element.value} />;\n            }\n\n            if (element.type === ELEMENT.TABLE && 'hasFooter' in element) {\n              const { data, hasFooter, cellsStyle } = element;\n\n              // use a little hack\n              style.top += 30;\n              delete style.height;\n\n              return (\n                <TablePDF\n                  key={elementKey}\n                  data={data}\n                  hasFooter={hasFooter}\n                  style={style}\n                  cellsStyle={cellsStyle}\n                />\n              );\n            }\n\n            return null;\n          })}\n        </Page>\n      ))}\n    </Document>\n  );\n};\n\nexport { DocumentPDF };\n","import React, { FC, useContext, useEffect, useState } from 'react';\n\nimport { PDFDownloadLink } from '@react-pdf/renderer';\nimport { Icon, Menu } from 'antd';\nimport { connectMenu, ContextMenu, MenuItem } from 'react-contextmenu';\n\nimport { DocumentPDF } from 'components/documentPDF';\n\nimport { FSContext } from 'state/context';\n\nimport { Document, DocumentPage, FILE_STATUS, FileSystemElement } from 'models';\n\nimport { CONTEXT_MENU_ID } from '../explorer/contextMenu';\nimport './styles.css';\n\nexport interface DataItem {\n  name: string;\n  icon: string;\n  value: string;\n  target: string;\n}\n\nexport interface MenuProps {\n  data: DataItem[];\n  currentId: string;\n  onChange: any;\n  trigger: {\n    item: FileSystemElement;\n  };\n}\n\nconst ContextMenuComponent: FC<MenuProps> = props => {\n  const { currentId, trigger, onChange } = props;\n\n  let { data } = props;\n\n  if (trigger && trigger.item) {\n    if (trigger.item.status === FILE_STATUS.DOCUMENT_IN_PROGRESS) {\n      data = data.filter(item => item.value !== 'edit-template');\n    }\n\n    if (trigger.item.status === FILE_STATUS.DOCUMENT__DONE) {\n      data = data.filter(\n        item => !['delete', 'commit', 'edit-template', 'rename'].includes(item.value),\n      );\n    }\n\n    if (trigger.item.status === FILE_STATUS.TEMPLATE) {\n      data = data.filter(item => !['commit', 'download'].includes(item.value));\n    }\n  }\n\n  const [pages, setPages] = useState<DocumentPage[]>([]);\n  const { documents } = useContext(FSContext);\n\n  useEffect(() => {\n    if (!trigger || !trigger.item) return;\n\n    const unsubscribe = documents.doc(trigger.item.documentId).onSnapshot(querySnapshot => {\n      const document = querySnapshot.data() as Document;\n      const content: DocumentPage[] = JSON.parse(document.content);\n      setPages(content);\n    });\n\n    return () => {\n      unsubscribe();\n    };\n  }, [documents, trigger]);\n\n  const fileName = trigger && trigger.item ? `${trigger.item.name}.pdf` : '';\n\n  return (\n    <ContextMenu id={currentId} className=\"context-menu\">\n      <Menu selectable={false}>\n        {data.map((item: DataItem) => (\n          <Menu.Item key={item.name}>\n            <MenuItem key={item.name} data={item} onClick={onChange}>\n              {item.value === 'download' ? (\n                <PDFDownloadLink\n                  key={item.name}\n                  document={<DocumentPDF pages={pages} />}\n                  fileName={fileName}\n                >\n                  {({ blob, url, loading, error }) =>\n                    loading ? (\n                      'Document loading...'\n                    ) : (\n                      <>\n                        <Icon\n                          type={item.icon}\n                          className={item.value === 'delete' ? 'alert' : 'primary'}\n                        />\n                        <span>{item.name}</span>\n                      </>\n                    )\n                  }\n                </PDFDownloadLink>\n              ) : (\n                <>\n                  <Icon\n                    type={item.icon}\n                    className={item.value === 'delete' ? 'alert' : 'primary'}\n                  />\n                  <span>{item.name}</span>\n                </>\n              )}\n            </MenuItem>\n          </Menu.Item>\n        ))}\n      </Menu>\n    </ContextMenu>\n  );\n};\n\nexport const ContextMenuConnected = connectMenu(CONTEXT_MENU_ID.DOCUMENT)(ContextMenuComponent);\n","import React, { FC } from 'react';\r\n\r\nimport { Modal } from 'antd';\r\n\r\nexport interface DialogProps {\r\n  open: boolean;\r\n  width?: string | number;\r\n  bodyStyle?: any;\r\n  title?: string;\r\n  content: any;\r\n  footer?: React.ReactNode | null;\r\n  onClose?: (e: React.MouseEvent<HTMLElement>) => void;\r\n  onAction?: (e: React.MouseEvent<HTMLElement>) => void;\r\n}\r\n\r\nconst DialogComponent: FC<DialogProps> = props => {\r\n  const { open, title, content, width, bodyStyle, onAction, onClose, footer } = props;\r\n\r\n  return (\r\n    <Modal\r\n      width={width}\r\n      bodyStyle={bodyStyle}\r\n      visible={open}\r\n      title={title}\r\n      onOk={onAction}\r\n      onCancel={onClose}\r\n      footer={footer}\r\n    >\r\n      {content}\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport { DialogComponent };\r\n","import React, { FC } from 'react';\r\n\r\nimport { FileSystemElement, FileSystemNode } from 'models';\r\n\r\nimport Icon from 'antd/lib/icon';\r\nimport Tree, { AntdTreeNodeAttribute } from 'antd/lib/tree';\r\n\r\nconst getTreeNodeIcon = ({ expanded }: AntdTreeNodeAttribute) => (\r\n  <Icon type={expanded ? 'folder-open' : 'folder'} theme=\"filled\" />\r\n);\r\n\r\nconst getTreeNodes = (data: FileSystemNode[]) => {\r\n  return data.map(item => (\r\n    <Tree.TreeNode data={item} key={item.id} icon={getTreeNodeIcon} title={item.name}>\r\n      {item.children ? getTreeNodes(item.children) : null}\r\n    </Tree.TreeNode>\r\n  ));\r\n};\r\n\r\nexport interface TreeComponentProps {\r\n  data: FileSystemNode[];\r\n  onSelect: (parent: FileSystemElement) => void;\r\n}\r\n\r\nexport const TreeComponent: FC<TreeComponentProps> = props => {\r\n  const { data, onSelect } = props;\r\n\r\n  return (\r\n    <Tree\r\n      showIcon={true}\r\n      switcherIcon={<Icon type=\"down\" />}\r\n      onSelect={(_, event) => {\r\n        if (!event.node.props.data) return;\r\n        onSelect(event.node.props.data);\r\n      }}\r\n    >\r\n      {getTreeNodes(data)}\r\n    </Tree>\r\n  );\r\n};\r\n","import createUseContext from 'constate';\nimport { useState } from 'react';\n\nconst CREATE_FOLDER = 'CREATE_FOLDER';\nconst CREATE_DOCUMENT = 'CREATE_DOCUMENT';\nconst CREATE_DOCUMENT_FROM_TEMPLATE = 'CREATE_DOCUMENT_FROM_TEMPLATE';\nconst RENAME_FS_ITEM = 'RENAME_FS_ITEM';\nexport const MODAL_MODES = {\n  CREATE_FOLDER,\n  CREATE_DOCUMENT,\n  CREATE_DOCUMENT_FROM_TEMPLATE,\n  RENAME_FS_ITEM,\n};\n\nexport type ModalModesType =\n  | typeof MODAL_MODES.CREATE_FOLDER\n  | typeof MODAL_MODES.CREATE_DOCUMENT\n  | typeof MODAL_MODES.CREATE_DOCUMENT_FROM_TEMPLATE\n  | typeof MODAL_MODES.RENAME_FS_ITEM;\n\nfunction useModal() {\n  const [open, setOpen] = useState(false);\n  const [mode, setMode] = useState<ModalModesType>(MODAL_MODES.CREATE_FOLDER);\n  const [target, setTarget] = useState<any>(null);\n\n  // tslint:disable-next-line: no-shadowed-variable\n  const modalToggle = (modalMode?: ModalModesType, target?: any) => {\n    setOpen(!open);\n    setMode(modalMode || MODAL_MODES.CREATE_FOLDER);\n    setTarget(target);\n  };\n\n  return {\n    open,\n    mode,\n    modalToggle,\n    target,\n    setTarget,\n  };\n}\n\nexport const useModalContext = createUseContext(useModal);\n","import React, { FC, useContext, useState } from 'react';\nimport { RouteComponentProps, withRouter } from 'react-router';\n\nimport { Input, Modal as ModalAnt } from 'antd';\n\nimport { FILE_STATUS, FILE_SYSTEM_ELEMENT, FileSystemElement } from 'models';\n\nimport { MODAL_MODES, ModalModesType, useModalContext } from 'state';\nimport { FSContext } from 'state/context';\n\nexport interface ModalProps extends RouteComponentProps<{ id: string }> {}\n\nconst getTitle = (mode: ModalModesType): string => {\n  if (mode === MODAL_MODES.CREATE_DOCUMENT) {\n    return 'Create new document';\n  }\n  if (mode === MODAL_MODES.CREATE_FOLDER) {\n    return 'Create new folder';\n  }\n  if (mode === MODAL_MODES.CREATE_DOCUMENT_FROM_TEMPLATE) {\n    return 'Create document from template';\n  }\n  if (mode === MODAL_MODES.RENAME_FS_ITEM) {\n    return 'Rename element';\n  }\n\n  throw new Error('Unknown mode: ' + mode);\n};\n\nconst ModalComponent: FC<ModalProps> = props => {\n  const [name, setName] = useState('');\n  const { open, mode, modalToggle, target } = useModalContext();\n  const { fsItems, createItem, rename, parentForCreateFromTemplate } = useContext(FSContext);\n\n  const { match, history } = props;\n\n  const onClose = () => {\n    modalToggle();\n    setName('');\n  };\n  const onCreate = async () => {\n    const data: FileSystemElement = {\n      name,\n      parentId: match.params.id,\n      type: FILE_SYSTEM_ELEMENT.FOLDER,\n    };\n\n    if (mode === MODAL_MODES.CREATE_DOCUMENT) {\n      const parent: FileSystemElement | undefined = fsItems.get(match.params.id);\n      if (!parent) return;\n\n      const isTemplate = parent.name === 'Vorlage';\n      data.type = FILE_SYSTEM_ELEMENT.DOCUMENT;\n      data.status = isTemplate ? FILE_STATUS.TEMPLATE : FILE_STATUS.DOCUMENT_IN_PROGRESS;\n    }\n\n    if (mode === MODAL_MODES.CREATE_DOCUMENT_FROM_TEMPLATE) {\n      if (!parentForCreateFromTemplate || !parentForCreateFromTemplate.id) return;\n\n      data.parentId = parentForCreateFromTemplate.id;\n      data.type = FILE_SYSTEM_ELEMENT.DOCUMENT;\n      data.status = FILE_STATUS.DOCUMENT_IN_PROGRESS;\n      data.formTemplate = true;\n      data.documentId = (target as FileSystemElement).documentId;\n    }\n\n    await createItem(data);\n    onClose();\n\n    if (mode === MODAL_MODES.CREATE_DOCUMENT_FROM_TEMPLATE && parentForCreateFromTemplate) {\n      history.push({ pathname: `${parentForCreateFromTemplate.id}` });\n    }\n  };\n\n  const handleOk = async () => {\n    try {\n      if (mode === MODAL_MODES.RENAME_FS_ITEM) {\n        await rename({ ...target, name });\n        onClose();\n      } else {\n        onCreate();\n      }\n    } catch (error) {\n      console.log('Error on create FS element', error);\n    }\n  };\n\n  const handleInputChange = (event: any) => {\n    setName(event.target.value);\n  };\n\n  const defaultValue =\n    mode === MODAL_MODES.RENAME_FS_ITEM ? (target as FileSystemElement).name : '';\n\n  return (\n    <ModalAnt visible={open} title={getTitle(mode)} onOk={handleOk} onCancel={onClose}>\n      {open && <Input autoFocus={true} onChange={handleInputChange} defaultValue={defaultValue} />}\n    </ModalAnt>\n  );\n};\n\nexport const Modal = withRouter(ModalComponent);\n","import createUseContext from 'constate';\n\nimport { useFileSystem } from 'hooks';\n\nexport const useFileSystemContext = createUseContext(useFileSystem);\n","const hasOwn = {}.hasOwnProperty;\r\n\r\nexport default function classNames(\r\n  ...args: Array<string | { [className: string]: boolean }>\r\n): string {\r\n  const classes = [];\r\n\r\n  for (const arg of args) {\r\n    if (!arg) {\r\n      continue;\r\n    }\r\n\r\n    const argType = typeof arg;\r\n\r\n    if (argType === 'string' || argType === 'number') {\r\n      classes.push(arg);\r\n    } else if (Array.isArray(arg)) {\r\n      classes.push(classNames.apply(null, arg));\r\n    } else if (argType === 'object') {\r\n      const obj = arg as { [className: string]: boolean };\r\n      for (const key of Object.keys(obj)) {\r\n        if (hasOwn.call(obj, key) && obj[key]) {\r\n          classes.push(key);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return classes.join(' ');\r\n}\r\n","import React, { FC } from 'react';\nimport { RouteComponentProps } from 'react-router-dom';\n\nimport Icon from 'antd/lib/icon';\nimport Table from 'antd/lib/table';\n\nimport { ContextMenuTrigger } from 'react-contextmenu';\nimport { CONTEXT_MENU_ID, getContextMenuId, menus } from './contextMenu';\n\nimport { ContextMenuComponent } from 'components/contextMenu';\nimport { DialogComponent } from 'components/dialog';\nimport { TreeComponent } from 'components/fsTree';\nimport { Modal } from 'components/modal';\n\nimport { FILE_STATUS, FILE_SYSTEM_ELEMENT, FileSystemElement, FSTarget } from 'models';\n\nimport classNames from 'utils/classnames';\n\nimport { useFileSystem, useModal } from 'hooks';\nimport { MODAL_MODES, useModalContext } from 'state';\n\nimport 'antd/es/tree/style/css';\nimport './styles.css';\n\nexport interface IconsMap {\n  [key: string]: JSX.Element;\n}\n\nconst getIcon = (item: FileSystemElement) => {\n  let docMark = 'sync';\n  if (item.status === FILE_STATUS.TEMPLATE) docMark = 'layout';\n  if (item.status === FILE_STATUS.DOCUMENT__DONE) docMark = 'check-circle';\n\n  let folderType = 'lock';\n  if (item.name === 'Vorlage') folderType = 'layout';\n\n  const iconsMap: IconsMap = {\n    [FILE_SYSTEM_ELEMENT.FOLDER]: (\n      <>\n        {item.isDefault && <Icon className=\"marker\" type={folderType} />}\n        <Icon className=\"icon folder\" type=\"folder\" theme=\"filled\" />\n      </>\n    ),\n    [FILE_SYSTEM_ELEMENT.DOCUMENT]: (\n      <>\n        {<Icon className=\"marker doc\" type={docMark} />}\n        <Icon className=\"icon\" type=\"file\" theme=\"filled\" />\n      </>\n    ),\n  };\n\n  return iconsMap[item.type];\n};\n\nconst getFSElementClasses = (item: FileSystemElement): string => {\n  const classes = {\n    'fs-element': true,\n    'in-progress': item.status === FILE_STATUS.DOCUMENT_IN_PROGRESS,\n  };\n\n  return classNames(classes);\n};\n\nexport interface ExplorerProps extends RouteComponentProps<{ id: string }> {}\n\nconst ExplorerComponent: FC<ExplorerProps> = props => {\n  const { match, history } = props;\n\n  const {\n    items,\n    elements,\n    copiedElement,\n    parentForCreateFromTemplate,\n    ...fsActions\n  } = useFileSystem(match.params.id);\n  const [elementsModal, elementsModalActions] = useModal<FSTarget<FileSystemElement>>();\n  const { modalToggle } = useModalContext();\n\n  const handleFSElement = (item: FileSystemElement) => () => {\n    if (item.type === FILE_SYSTEM_ELEMENT.FOLDER) {\n      history.push({ pathname: `${item.id}` });\n    } else {\n      if (item.status === FILE_STATUS.TEMPLATE) {\n        const target: FSTarget<FileSystemElement> = {\n          item,\n          name: 'new_file_from_template',\n          value: 'new_file_from_template',\n        };\n\n        elementsModalActions.setModalState({\n          open: true,\n          title: 'Create document from template',\n          target,\n          content: (\n            <TreeComponent\n              data={fsActions.getFolderElementsTreeById('Root', FILE_SYSTEM_ELEMENT.FOLDER)}\n              onSelect={fsActions.setParentForCreateFromTemplate}\n            />\n          ),\n        });\n      } else {\n        history.push(`/document/${item.id}`);\n      }\n    }\n  };\n\n  const handleContextMenuActions = (event: any, target: FSTarget<FileSystemElement>) => {\n    switch (target.value) {\n      case 'new_file': {\n        return modalToggle(MODAL_MODES.CREATE_DOCUMENT);\n      }\n      case 'new_folder': {\n        return modalToggle(MODAL_MODES.CREATE_FOLDER);\n      }\n      case 'rename': {\n        return modalToggle(MODAL_MODES.RENAME_FS_ITEM, target.item);\n      }\n      case 'edit-template': {\n        return history.push(`/document/${target.item.id}`);\n      }\n      case 'past': {\n        return fsActions.pasteItem(match.params.id);\n      }\n      case 'delete': {\n        if (target.item.isDefault) return;\n        const title = 'Are you sure you want to delete?';\n        return elementsModalActions.setModalState({ open: true, title, target });\n      }\n      case 'download': {\n        return console.log('download', event, target);\n      }\n      case 'info': {\n        const title = 'Document information';\n\n        const columns = [\n          {\n            dataIndex: 'title',\n          },\n          {\n            dataIndex: 'date',\n          },\n        ];\n\n        const data = [\n          {\n            title: 'Created',\n            date: '19.02.2019',\n          },\n          {\n            title: 'Updated',\n            date: '19.02.2019',\n          },\n        ];\n\n        const content = (\n          <Table\n            size=\"small\"\n            bordered={true}\n            showHeader={false}\n            pagination={false}\n            columns={columns}\n            dataSource={data}\n          />\n        );\n\n        return elementsModalActions.setModalState({ open: true, title, target, content });\n      }\n      case 'copy': {\n        return fsActions.copyItem(target.item);\n      }\n      case 'commit': {\n        const title = 'Are you sure you want to commit?';\n        return elementsModalActions.setModalState({ open: true, title, target });\n      }\n      default:\n        return;\n    }\n  };\n\n  const handleElementsModalAction = async () => {\n    if (!elementsModal.target) return;\n\n    const { value, name, item } = elementsModal.target;\n\n    if (!value || !item) return;\n\n    try {\n      if (value === 'delete') {\n        await fsActions.removeById(item.id);\n      }\n      if (value === 'commit') {\n        await fsActions.commit(item.id);\n      }\n      if (value === 'new_file_from_template') {\n        modalToggle(MODAL_MODES.CREATE_DOCUMENT_FROM_TEMPLATE, item);\n      }\n\n      elementsModalActions.closeModal();\n    } catch (error) {\n      console.log(`Error on ${name} FS element`, error);\n    }\n  };\n\n  const getElements = (data: FileSystemElement[], index: number) => (\n    <div key={index} className=\"root\">\n      {data.map(item => (\n        <ContextMenuTrigger\n          key={item.id}\n          collect={params => ({ ...params, item })}\n          id={item.isDefault ? '' : getContextMenuId(item.type)}\n        >\n          <div className={getFSElementClasses(item)} onClick={handleFSElement(item)}>\n            {getIcon(item)}\n            <span className=\"text\">{item.name}</span>\n          </div>\n        </ContextMenuTrigger>\n      ))}\n    </div>\n  );\n\n  return (\n    <ContextMenuTrigger id={CONTEXT_MENU_ID.EXPLORER}>\n      <div className=\"explorer\">{elements.map(getElements)}</div>\n\n      {menus.map(item => {\n        let menuData = item.data;\n\n        const parent = fsActions.getElement(match.params.id);\n        const isTemplate: boolean = !!parent && parent.name === 'Vorlage';\n\n        if (item.currentId === CONTEXT_MENU_ID.EXPLORER) {\n          menuData = item.data.filter(\n            i =>\n              i.value !== 'past' ||\n              (copiedElement &&\n                ((copiedElement.status !== FILE_STATUS.TEMPLATE && !isTemplate) ||\n                  (copiedElement.status === FILE_STATUS.TEMPLATE && isTemplate))),\n          );\n        }\n\n        return (\n          <ContextMenuComponent\n            key={item.currentId}\n            data={menuData}\n            currentId={item.currentId}\n            onChange={handleContextMenuActions}\n          />\n        );\n      })}\n\n      <Modal />\n\n      <DialogComponent\n        open={elementsModal.open}\n        title={elementsModal.title}\n        content={elementsModal.content}\n        onAction={handleElementsModalAction}\n        onClose={elementsModalActions.closeModal}\n      />\n    </ContextMenuTrigger>\n  );\n};\n\nexport { ExplorerComponent };\n","import { withRouter } from 'react-router';\r\n\r\nimport { ExplorerComponent } from './explorer';\r\n\r\nexport const Explorer = withRouter(ExplorerComponent);\r\n","import React, { FC, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { Icon, Layout, Menu } from 'antd';\r\nimport { ClickParam } from 'antd/lib/menu';\r\n\r\nimport { MODAL_MODES, useModalContext } from 'state';\r\n\r\nimport logo from 'assets/logo.png';\r\nimport './styles.css';\r\n\r\nexport interface MenuItem {\r\n  key: string;\r\n  text: string;\r\n  icon: string;\r\n}\r\nexport interface SidebarProps {}\r\n\r\nconst SidebarComponent: FC<SidebarProps> = props => {\r\n  const [collapsed, setCollapsed] = useState(false);\r\n  const { modalToggle } = useModalContext();\r\n\r\n  const onMenuClick = (params: ClickParam) => {\r\n    if (params.key === 'file') {\r\n      modalToggle(MODAL_MODES.CREATE_DOCUMENT);\r\n    }\r\n\r\n    if (params.key === 'folder') {\r\n      modalToggle(MODAL_MODES.CREATE_FOLDER);\r\n    }\r\n  };\r\n\r\n  const menuItems: MenuItem[] = [\r\n    {\r\n      key: 'folder',\r\n      text: 'New folder',\r\n      icon: 'folder-add',\r\n    },\r\n    {\r\n      key: 'file',\r\n      text: 'New document',\r\n      icon: 'file-add',\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <Layout.Sider collapsible={true} collapsed={collapsed} onCollapse={setCollapsed}>\r\n      <Link to=\"/\" className=\"logoContainer\">\r\n        <img className=\"logo\" alt=\"logo\" src={logo} />\r\n\r\n        {'binale'.split('').map((letter, index) => (\r\n          <span key={index} className=\"logoText\">\r\n            {letter}\r\n          </span>\r\n        ))}\r\n      </Link>\r\n\r\n      <Menu theme=\"dark\" selectable={false} onClick={onMenuClick}>\r\n        {menuItems.map(item => (\r\n          <Menu.Item key={item.key}>\r\n            <Icon type={item.icon} />\r\n            <span>{item.text}</span>\r\n          </Menu.Item>\r\n        ))}\r\n      </Menu>\r\n    </Layout.Sider>\r\n  );\r\n};\r\n\r\nexport { SidebarComponent };\r\n","import React, { FC } from 'react';\r\n\r\nimport { Layout } from 'antd';\r\n\r\nimport { SidebarComponent } from 'components/sidebar';\r\n\r\nimport './styles.css';\r\n\r\nexport interface LayoutProps {}\r\n\r\nconst LayoutComponent: FC<LayoutProps> = props => {\r\n  return (\r\n    <Layout className=\"layout\">\r\n      <SidebarComponent />\r\n\r\n      {props.children}\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport { LayoutComponent };\r\n","import React, { FC } from 'react';\r\n\r\nimport { Layout } from 'antd';\r\n\r\nimport { Breadcrumb } from 'components/breadcrumb';\r\nimport { Explorer } from 'components/explorer';\r\nimport { LayoutComponent } from 'components/layout';\r\n\r\nimport './styles.css';\r\n\r\nexport interface DashboardProps {}\r\n\r\nconst DashboardPage: FC<DashboardProps> = props => {\r\n  return (\r\n    <LayoutComponent>\r\n      <Layout className=\"dashboard\">\r\n        <Layout.Header className=\"header\" />\r\n\r\n        <Layout.Content className=\"content\">\r\n          <Breadcrumb />\r\n\r\n          <div className=\"main\">\r\n            <Explorer />\r\n          </div>\r\n        </Layout.Content>\r\n\r\n        <Layout.Footer className=\"footer\">Binale Software 2019</Layout.Footer>\r\n      </Layout>\r\n    </LayoutComponent>\r\n  );\r\n};\r\n\r\nexport { DashboardPage };\r\n","import React, { FC, useState } from 'react';\n\nimport { Button, InputNumber } from 'antd';\nimport ChromePicker from 'react-color/lib/components/chrome/Chrome';\n\nimport { ELEMENT, ElementUnion } from 'models';\nimport '../styles.css';\n\nexport interface BlockProps {\n  handleChangeSettings: (style: string, value: string, type: string) => void;\n  activeElement: ElementUnion;\n}\n\nconst popover = {\n  position: 'absolute',\n  zIndex: '2',\n};\nconst cover = {\n  position: 'fixed',\n  top: '0px',\n  right: '0px',\n  bottom: '0px',\n  left: '0px',\n};\n\nconst setColor = (style: any): any => (style ? style : null);\n\nconst BlockComponent: FC<BlockProps> = ({ handleChangeSettings, activeElement }) => {\n  const { size, position, style, type } = activeElement;\n\n  const [displayColorPicker, setDisplayColorPicker] = useState(false);\n\n  const handleClick = () => {\n    setDisplayColorPicker(!displayColorPicker);\n  };\n\n  const handleClose = () => {\n    setDisplayColorPicker(false);\n  };\n\n  const colorActive = setColor(style);\n  // @ts-ignore\n  return (\n    <div className=\"block-settings-editor\">\n      <div className=\"fields\">\n        <span>Width:</span>\n        <InputNumber\n          value={size.width}\n          size=\"small\"\n          onChange={(value: any) => handleChangeSettings('width', value, 'size')}\n        />\n      </div>\n      <div className=\"fields\">\n        <span>Height:</span>\n        <InputNumber\n          value={size.height}\n          size=\"small\"\n          onChange={(value: any) => handleChangeSettings('height', value, 'size')}\n        />\n      </div>\n      <div className=\"fields\">\n        <span>X:</span>\n        <InputNumber\n          value={position.x}\n          size=\"small\"\n          onChange={(value: any) => handleChangeSettings('x', value, 'position')}\n        />\n      </div>\n      <div className=\"fields\">\n        <span>Y:</span>\n        <InputNumber\n          value={position.y}\n          size=\"small\"\n          onChange={(value: any) => handleChangeSettings('y', value, 'position')}\n        />\n      </div>\n      <div>\n        Background: <Button icon=\"bg-colors\" className=\"icon-settings\" onClick={handleClick} />\n        {displayColorPicker ? (\n          <div style={popover as any}>\n            <div style={cover as any} onClick={handleClose} />\n            <ChromePicker\n              color={colorActive.backgroundColor}\n              onChangeComplete={(color: any) =>\n                handleChangeSettings('backgroundColor', color.hex, 'style')\n              }\n            />\n          </div>\n        ) : null}\n      </div>\n    </div>\n  );\n};\n\nexport default BlockComponent;\n","import React, { FC, useState } from 'react';\n\nimport { Button, InputNumber } from 'antd';\nimport ChromePicker from 'react-color/lib/components/chrome/Chrome';\n\nimport { ELEMENT, ElementUnion } from 'models';\nimport '../styles.css';\n\nexport interface BlockProps {\n  handleChangeSettings: (style: string, value: string, type: string) => void;\n  activeElement: ElementUnion;\n}\n\nconst popover = {\n  position: 'absolute',\n  zIndex: '2',\n};\nconst cover = {\n  position: 'fixed',\n  top: '0px',\n  right: '0px',\n  bottom: '0px',\n  left: '0px',\n};\n\nconst setColor = (style: any): any => (style ? style : null);\n\nconst BorderComponent: FC<BlockProps> = ({ handleChangeSettings, activeElement }) => {\n  const { size, position, style } = activeElement;\n\n  const [displayColorPicker, setDisplayColorPicker] = useState(false);\n\n  const handleClick = () => {\n    setDisplayColorPicker(!displayColorPicker);\n  };\n\n  const handleClose = () => {\n    setDisplayColorPicker(false);\n  };\n\n  const styleDefault = setColor(style);\n  // @ts-ignore\n  return (\n    <div className=\"block-settings-editor\">\n      <div className=\"fields\">\n        <span>Width:</span>\n        <InputNumber\n          value={size.width}\n          size=\"small\"\n          onChange={(value: any) => handleChangeSettings('width', value, 'size')}\n        />\n      </div>\n      <div className=\"fields\">\n        <span>Height:</span>\n        <InputNumber\n          value={size.height}\n          size=\"small\"\n          onChange={(value: any) => handleChangeSettings('height', value, 'size')}\n        />\n      </div>\n      <div className=\"fields\">\n        <span>X:</span>\n        <InputNumber\n          value={position.x}\n          size=\"small\"\n          onChange={(value: any) => handleChangeSettings('x', value, 'position')}\n        />\n      </div>\n      <div className=\"fields\">\n        <span>Y:</span>\n        <InputNumber\n          value={position.y}\n          size=\"small\"\n          onChange={(value: any) => handleChangeSettings('y', value, 'position')}\n        />\n      </div>\n      <div className=\"fields\">\n        <span>Border:</span>\n        <InputNumber\n          value={styleDefault.borderWidth}\n          size=\"small\"\n          onChange={(value: any) => handleChangeSettings('borderWidth', value, 'style')}\n        />\n      </div>\n      <div>\n        Border Color: <Button icon=\"bg-colors\" className=\"icon-settings\" onClick={handleClick} />\n        {displayColorPicker ? (\n          <div style={popover as any}>\n            <div style={cover as any} onClick={handleClose} />\n            <ChromePicker\n              color={styleDefault.backgroundColor}\n              onChangeComplete={(color: any) =>\n                handleChangeSettings('borderColor', color.hex, 'style')\n              }\n            />\n          </div>\n        ) : null}\n      </div>\n    </div>\n  );\n};\n\nexport default BorderComponent;\n","import React, { FC, useState } from 'react';\n\nimport { Button, InputNumber } from 'antd';\nimport ChromePicker from 'react-color/lib/components/chrome/Chrome';\n\nimport { ELEMENT, ElementUnion } from 'models';\nimport '../styles.css';\n\nexport interface BlockProps {\n  handleChangeSettings: (style: string, value: string, type: string) => void;\n  activeElement: ElementUnion;\n}\n\nconst popover = {\n  position: 'absolute',\n  zIndex: '2',\n};\nconst cover = {\n  position: 'fixed',\n  top: '0px',\n  right: '0px',\n  bottom: '0px',\n  left: '0px',\n};\n\nconst ImageComponent: FC<BlockProps> = ({ handleChangeSettings, activeElement }) => {\n  const { size, position } = activeElement;\n\n  // @ts-ignore\n  return (\n    <div className=\"block-settings-editor\">\n      <div className=\"fields\">\n        <span>Width:</span>\n        <InputNumber\n          value={size.width}\n          size=\"small\"\n          onChange={(value: any) => handleChangeSettings('width', value, 'size')}\n        />\n      </div>\n      <div className=\"fields\">\n        <span>Height:</span>\n        <InputNumber\n          value={size.height}\n          size=\"small\"\n          onChange={(value: any) => handleChangeSettings('height', value, 'size')}\n        />\n      </div>\n      <div className=\"fields\">\n        <span>X:</span>\n        <InputNumber\n          value={position.x}\n          size=\"small\"\n          onChange={(value: any) => handleChangeSettings('x', value, 'position')}\n        />\n      </div>\n      <div className=\"fields\">\n        <span>Y:</span>\n        <InputNumber\n          value={position.y}\n          size=\"small\"\n          onChange={(value: any) => handleChangeSettings('y', value, 'position')}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default ImageComponent;\n","import React, { FC, useState } from 'react';\n\nimport { Button, InputNumber } from 'antd';\nimport ChromePicker from 'react-color/lib/components/chrome/Chrome';\n\nimport { ELEMENT, ElementUnion } from 'models';\nimport '../styles.css';\n\nexport interface BlockProps {\n  handleChangeSettings: (style: string, value: string, type: string) => void;\n  activeElement: ElementUnion;\n}\n\nconst popover = {\n  position: 'absolute',\n  zIndex: '2',\n};\nconst cover = {\n  position: 'fixed',\n  top: '0px',\n  right: '0px',\n  bottom: '0px',\n  left: '0px',\n};\n\nconst setColor = (style: any): any => (style ? style : null);\n\nconst TableComponent: FC<BlockProps> = ({ handleChangeSettings, activeElement }) => {\n  const { size, position, style, type } = activeElement;\n\n  const [displayColorPicker, setDisplayColorPicker] = useState(false);\n  const [openBorderColor, setBorderColor] = useState(false);\n\n  const handleClick = () => {\n    setDisplayColorPicker(!displayColorPicker);\n  };\n\n  const handleClose = () => {\n    setDisplayColorPicker(false);\n  };\n\n  const handleClickBorder = () => {\n    setBorderColor(!openBorderColor);\n  };\n\n  const handleCloseBorder = () => {\n    setBorderColor(false);\n  };\n\n  const styleDefault = setColor(style);\n  // @ts-ignore\n  return (\n    <div className=\"block-settings-editor\">\n      <div className=\"fields\">\n        <span>Width:</span>\n        <InputNumber\n          value={size.width}\n          size=\"small\"\n          onChange={(value: any) => handleChangeSettings('width', value, 'size')}\n        />\n      </div>\n      <div className=\"fields\">\n        <span>Height:</span>\n        <InputNumber\n          value={size.height}\n          size=\"small\"\n          onChange={(value: any) => handleChangeSettings('height', value, 'size')}\n        />\n      </div>\n      <div className=\"fields\">\n        <span>X:</span>\n        <InputNumber\n          value={position.x}\n          size=\"small\"\n          onChange={(value: any) => handleChangeSettings('x', value, 'position')}\n        />\n      </div>\n      <div className=\"fields\">\n        <span>Y:</span>\n        <InputNumber\n          value={position.y}\n          size=\"small\"\n          onChange={(value: any) => handleChangeSettings('y', value, 'position')}\n        />\n      </div>\n      <div className=\"fields\">\n        <span>Border:</span>\n        <InputNumber\n          value={styleDefault.borderWidth}\n          size=\"small\"\n          onChange={(value: any) => handleChangeSettings('borderWidth', value, 'style')}\n        />\n      </div>\n      <div>\n        Background: <Button icon=\"bg-colors\" className=\"icon-settings\" onClick={handleClick} />\n        {displayColorPicker ? (\n          <div style={popover as any}>\n            <div style={cover as any} onClick={handleClose} />\n            <ChromePicker\n              color={styleDefault.backgroundColor}\n              onChangeComplete={(color: any) =>\n                handleChangeSettings('backgroundColor', color.hex, 'style')\n              }\n            />\n          </div>\n        ) : null}\n      </div>\n      <div>\n        Border Color:{' '}\n        <Button icon=\"bg-colors\" className=\"icon-settings\" onClick={handleClickBorder} />\n        {openBorderColor ? (\n          <div style={popover as any}>\n            <div style={cover as any} onClick={handleCloseBorder} />\n            <ChromePicker\n              color={styleDefault.backgroundColor}\n              onChangeComplete={(color: any) =>\n                handleChangeSettings('borderColor', color.hex, 'style')\n              }\n            />\n          </div>\n        ) : null}\n      </div>\n    </div>\n  );\n};\n\nexport default TableComponent;\n","import React, { FC } from 'react';\n\nimport { useEditorContext } from 'state/editor';\n\nimport { ELEMENT, ElementUnion } from 'models';\n\nimport BlockComponent from './components/block/block';\nimport BorderComponent from './components/border/border';\nimport ImageComponent from './components/image/image';\nimport TableComponent from './components/table/table';\n\n// import { VorlageComponent } from '../vorlage';\n\nimport './styles.css';\n\nexport interface EditorProps {}\nconst settingsComponents = (activeElement: ElementUnion, handleChangeSettings: any): any => ({\n  [ELEMENT.BLOCK]: (\n    <BlockComponent activeElement={activeElement} handleChangeSettings={handleChangeSettings} />\n  ),\n  [ELEMENT.BORDER]: (\n    <BorderComponent activeElement={activeElement} handleChangeSettings={handleChangeSettings} />\n  ),\n  [ELEMENT.IMAGE]: (\n    <ImageComponent activeElement={activeElement} handleChangeSettings={handleChangeSettings} />\n  ),\n  [ELEMENT.TABLE]: (\n    <TableComponent activeElement={activeElement} handleChangeSettings={handleChangeSettings} />\n  ),\n});\n\nconst EditorComponent: FC<EditorProps> = () => {\n  const { actions, activeId, activeElement, isDone } = useEditorContext();\n\n  const handleChangeSettings = (style: string, value: string, type: string) => {\n    actions.handleChangeSettings(\n      activeId.page,\n      activeId.id,\n      style,\n      value,\n      type,\n      activeElement as ElementUnion,\n    );\n  };\n\n  return (\n    <div className=\"editor-container\">\n      <div className=\"editor-page\">\n        Page settings\n        {/*<>\n          <Button icon=\"bg-colors\" className=\"icon-settings\" onClick={handleClick} />\n          {displayColorPicker ? (\n            <div style={popover as any}>\n              <div style={cover as any} onClick={handleClose} />\n              <ChromePicker\n                color={colorActive}\n                onChangeComplete={(color: any) =>\n                  handleChangeSettings(colorActive.type, color.hex, 'style')\n                }\n              />\n            </div>\n          ) : null}\n        </>*/}\n      </div>\n\n      {!isDone && !!activeElement && (\n        <div className=\"editor-settings\">\n          {settingsComponents(activeElement, handleChangeSettings)[activeElement.type]}\n        </div>\n      )}\n      {/* <VorlageComponent /> */}\n    </div>\n  );\n};\n\nexport { EditorComponent };\n","import React, { FC } from 'react';\n\nimport { useDrag } from 'react-dnd';\n\nimport { Icon } from 'antd';\n\nimport { Control } from 'models';\n\nimport './styles.css';\n\nexport const DND_CONTROL_TYPES = {\n  BOX: 'DND_CONTROL_TYPE__BOX',\n};\n\nexport interface ElementProps {\n  control: Control;\n}\n\nconst ElementControlComponent: FC<ElementProps> = props => {\n  const { control } = props;\n  const [, drag] = useDrag({ item: { type: DND_CONTROL_TYPES.BOX, element: control.type } });\n  return (\n    <div>\n      <div className=\"element-control\" ref={drag}>\n        <Icon type={control.icon} />\n        <span className=\"text\">{control.name}</span>\n      </div>\n    </div>\n  );\n};\n\nexport { ElementControlComponent };\n","import { Button, Icon, InputNumber } from 'antd';\r\nimport React, { FC, useState } from 'react';\r\nimport { ChromePicker } from 'react-color';\r\n\r\nimport './styles.css';\r\n\r\nexport interface TextSettingsProps {\r\n  changeTextStyle: (style: string, value: string) => void;\r\n  element: any;\r\n}\r\n\r\nconst settingsContent = [\r\n  {\r\n    icon: 'align-left',\r\n    style: 'textAlign',\r\n    value: 'left',\r\n  },\r\n  {\r\n    icon: 'align-center',\r\n    style: 'textAlign',\r\n    value: 'center',\r\n  },\r\n  {\r\n    icon: 'align-right',\r\n    style: 'textAlign',\r\n    value: 'right',\r\n  },\r\n  {\r\n    icon: 'underline',\r\n    style: 'textDecoration',\r\n    value: 'underline',\r\n  },\r\n  {\r\n    icon: 'bold',\r\n    style: 'fontWeight',\r\n    value: 'bold',\r\n  },\r\n  {\r\n    icon: 'italic',\r\n    style: 'fontWeight',\r\n    value: 'italic',\r\n  },\r\n];\r\n\r\nconst popover = {\r\n  position: 'absolute',\r\n  zIndex: '2',\r\n};\r\nconst cover = {\r\n  position: 'fixed',\r\n  top: '0px',\r\n  right: '0px',\r\n  bottom: '0px',\r\n  left: '0px',\r\n};\r\n\r\nconst TextSettings: FC<TextSettingsProps> = ({ changeTextStyle, element }) => {\r\n  const { style } = element;\r\n  const [displayColorPicker, setDisplayColorPicker] = useState(false);\r\n\r\n  const handleClick = () => {\r\n    setDisplayColorPicker(!displayColorPicker);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setDisplayColorPicker(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"text-settings-root\">\r\n      <div className=\"font-setting\">\r\n        <Icon type=\"font-size\" className=\"icon-settings\" />\r\n        <InputNumber value={style.fontSize} onChange={(e: any) => changeTextStyle('fontSize', e)} />\r\n      </div>\r\n      <Button icon=\"font-colors\" className=\"icon-settings\" onClick={handleClick} />\r\n      {displayColorPicker ? (\r\n        <div style={popover as any}>\r\n          <div style={cover as any} onClick={handleClose} />\r\n          <ChromePicker\r\n            color={style.color}\r\n            onChangeComplete={(color: any) => changeTextStyle('color', color.hex)}\r\n          />\r\n        </div>\r\n      ) : null}\r\n      {settingsContent.map((item, index) => (\r\n        <Button\r\n          icon={item.icon}\r\n          key={index}\r\n          className=\"icon-settings\"\r\n          onClick={() => changeTextStyle(item.style, item.value)}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport { TextSettings };\r\n","import React, { FC, MutableRefObject, useRef } from 'react';\nimport { DraggableData, ResizableDelta, Rnd } from 'react-rnd';\n\nimport { Button, Tooltip } from 'antd';\n\nimport { BlockView, BorderView, ImageView, TableView, TextView } from 'components/elements';\nimport { TextSettings } from 'components/textSettings';\n\nimport { useEditorContext } from 'state/editor';\n\nimport { ELEMENT, ElementType, ElementUnion, Position, TableElement, TextElement } from 'models';\n\nimport './styles.css';\n\nconst renderElement = (\n  element: ElementUnion,\n  innerElement: MutableRefObject<HTMLDivElement | undefined>,\n  changeTable: (row: number, column: number, value: string) => void,\n  addColSpan: (row: number, column: number) => void,\n  addRowToTableElement: () => void,\n  addColumnToTableElement: () => void,\n  removeRowFromTableElement: (row: number) => void,\n  removeColumnFromTableElement: (column: number) => void,\n  isActive: boolean,\n  isDone: boolean,\n  handleChangeText: (value: string) => void,\n  preview: boolean,\n) => {\n  if (!element) return null;\n\n  if (element.type === ELEMENT.BLOCK) {\n    return <BlockView style={element.style} />;\n  }\n\n  if (element.type === ELEMENT.BORDER) {\n    return <BorderView style={element.style} />;\n  }\n\n  if (element.type === ELEMENT.TABLE && 'hasFooter' in element) {\n    const { data, hasFooter, style, cellsStyle } = element;\n\n    return (\n      <TableView\n        innerRef={innerElement}\n        data={data}\n        hasFooter={hasFooter}\n        style={style}\n        cellsStyle={cellsStyle}\n        isActive={isActive}\n        isDone={isDone}\n        changeTable={changeTable}\n        preview={preview}\n        actions={{\n          addColSpan,\n          addRowToTableElement,\n          addColumnToTableElement,\n          removeRowFromTableElement,\n          removeColumnFromTableElement,\n        }}\n      />\n    );\n  }\n  if (element.type === ELEMENT.IMAGE && 'value' in element) {\n    return <ImageView style={element.style} value={element.value} />;\n  }\n  if (element.type === ELEMENT.TEXT && 'value' in element) {\n    return (\n      <TextView\n        style={element.style}\n        isActive={isActive}\n        value={element.value}\n        handleChangeText={handleChangeText}\n      />\n    );\n  }\n};\n\nconst getHeight = (\n  innerElement: MutableRefObject<HTMLDivElement | undefined>,\n  element: ElementUnion,\n) => {\n  if (element.type !== ELEMENT.TABLE || !innerElement.current) return element.size.height;\n\n  const boundingRect = innerElement.current.getBoundingClientRect();\n  return boundingRect.height;\n};\n\nconst getEnableResizing = (type: ElementType, done: boolean) => {\n  const enableResizing = {\n    bottom: false,\n    bottomLeft: false,\n    bottomRight: false,\n    right: false,\n    left: false,\n    top: false,\n    topLeft: false,\n    topRight: false,\n  };\n\n  if (type === ELEMENT.TABLE) {\n    enableResizing.right = !done;\n    return enableResizing;\n  }\n\n  if (done) return enableResizing;\n\n  return undefined;\n};\n\nexport interface BoxProps {\n  id: number;\n  pageIndex: number;\n  element: ElementUnion;\n}\n\nconst Box: FC<BoxProps> = props => {\n  const { id, pageIndex, element } = props;\n  const { isDone, activeElement, actions, preview } = useEditorContext();\n\n  const isActiveText = activeElement && activeElement.type === ELEMENT.TEXT;\n\n  const innerElement = useRef<HTMLDivElement>();\n\n  const { position, size } = element;\n\n  const stopPropagation = (e: any) => e.stopPropagation();\n\n  const isActive = actions.isElementActive(element);\n  const className = !isDone ? 'dnd-box' : '';\n\n  const onDoubleClick = (e: any) => {\n    if (preview) return;\n    actions.setActiveElement(element);\n    actions.setActiveId(pageIndex, id);\n    actions.showDrawer();\n  };\n\n  const onDragStop = (e: any, data: DraggableData) => {\n    element.position.x = data.x;\n    element.position.y = data.y;\n\n    actions.changeElement(pageIndex, id, element);\n  };\n\n  const onResizeStop = (\n    e: any,\n    dir: any,\n    elementRef: HTMLDivElement,\n    delta: ResizableDelta,\n    // tslint:disable-next-line: no-shadowed-variable\n    position: Position,\n  ) => {\n    const { width, height } = elementRef.getBoundingClientRect();\n\n    element.position.x = position.x;\n    element.position.y = position.y;\n    element.size.width = width;\n    element.size.height = height;\n    actions.changeElement(pageIndex, id, element);\n  };\n\n  const changeTable = (row: number, column: number, value: string) => {\n    (element as TableElement).data[row][column] = value;\n    actions.changeElement(pageIndex, id, element);\n  };\n\n  const addRowToTableElement = () => {\n    actions.addRowToTableElement(pageIndex, id, element as TableElement);\n  };\n\n  const addColumnToTableElement = () => {\n    actions.addColumnToTableElement(pageIndex, id, element as TableElement);\n  };\n\n  const addColSpan = (row: number, column: number) => {\n    actions.addColSpan(pageIndex, id, element as TableElement, row, column);\n  };\n\n  const removeRowFromTableElement = (row: number) => {\n    actions.removeRowFromTableElement(pageIndex, id, element as TableElement, row);\n  };\n\n  const removeColumnFromTableElement = (column: number) => {\n    actions.removeColumnFromTableElement(pageIndex, id, element as TableElement, column);\n  };\n\n  const handleChangeText = (value: string) => {\n    actions.handleChangeText(pageIndex, id, value, element as TextElement);\n  };\n\n  const changeTextStyle = (style: string, value: string) => {\n    actions.changeTextStyle(pageIndex, id, style, value, element as TextElement);\n  };\n  return (\n    <Rnd\n      className={className}\n      bounds=\"parent\"\n      // default={{ ...position, ...size }}\n      position={position}\n      size={{ width: size.width, height: getHeight(innerElement, element) }}\n      onClick={(e: any) => stopPropagation(e)}\n      onDoubleClick={onDoubleClick}\n      disableDragging={isActive || isDone || preview}\n      onDragStop={onDragStop}\n      enableResizing={getEnableResizing(element.type, isDone)}\n      onResizeStop={onResizeStop}\n    >\n      {!isDone && isActive && (\n        <Tooltip className=\"remove-btn\" placement=\"right\" title=\"delete\">\n          <Button\n            type=\"danger\"\n            icon=\"close\"\n            size=\"small\"\n            shape=\"circle\"\n            onClick={() => actions.deleteElement(pageIndex, id)}\n          />\n        </Tooltip>\n      )}\n      {!isDone && isActive && isActiveText && (\n        <TextSettings changeTextStyle={changeTextStyle} element={element} />\n      )}\n      {renderElement(\n        element,\n        innerElement,\n        changeTable,\n        addColSpan,\n        addRowToTableElement,\n        addColumnToTableElement,\n        removeRowFromTableElement,\n        removeColumnFromTableElement,\n        isActive,\n        isDone,\n        handleChangeText,\n        preview,\n      )}\n    </Rnd>\n  );\n};\n\nexport default Box;\n","import React, { FC, useEffect, useRef, useState } from 'react';\n\nimport { DND_CONTROL_TYPES } from 'components/elementControl';\nimport { useDrop } from 'react-dnd';\n\nimport { Button, Tooltip } from 'antd';\nimport Box from './box';\n\nimport { EditorActions } from 'hooks/useEditor';\nimport { DocumentPage, DragObject, ELEMENT } from 'models';\n\nimport './styles.css';\n\nexport interface PageProps {\n  pageIndex: number;\n  page: DocumentPage;\n  actions: EditorActions;\n  isDone: boolean;\n  preview: boolean;\n}\n\nconst PageComponent: FC<PageProps> = props => {\n  const { pageIndex, page, isDone, actions, preview } = props;\n\n  // const [hasDropped, setHasDropped] = useState(false);\n  // const [hasDroppedOnChild, setHasDroppedOnChild] = useState(false);\n  const [bodyOffset, setBodyOffset] = useState(document.body.getBoundingClientRect());\n  const [scrollY, setScrollY] = useState(bodyOffset.top);\n\n  const listRef: any = useRef();\n\n  const [obj, drop] = useDrop({\n    accept: DND_CONTROL_TYPES.BOX,\n    drop(item: DragObject, monitor) {\n      const position = monitor.getClientOffset();\n\n      if (!obj || !position) return;\n\n      position.x = position.x - listRef.current.offsetLeft;\n      position.y = position.y - listRef.current.offsetTop + scrollY;\n\n      if (item.element === ELEMENT.IMAGE) {\n        actions.addImage(pageIndex, item.element, position);\n      } else {\n        actions.addElement(pageIndex, item.element, position);\n      }\n\n      const didDrop = monitor.didDrop();\n\n      if (didDrop) return;\n\n      // setHasDropped(true);\n      // setHasDroppedOnChild(didDrop);\n    },\n    collect: monitor => ({\n      isOver: monitor.isOver(),\n      isOverCurrent: monitor.isOver({ shallow: true }),\n    }),\n  });\n\n  const listener = () => {\n    setBodyOffset(document.body.getBoundingClientRect());\n    setScrollY(-bodyOffset.top);\n  };\n\n  useEffect(() => {\n    window.addEventListener('scroll', listener);\n    return () => {\n      window.removeEventListener('scroll', listener);\n    };\n  });\n\n  return (\n    <div\n      className=\"list-container\"\n      ref={drop}\n      onClick={() => {\n        actions.resetActiveElement();\n        actions.resetActiveId();\n      }}\n    >\n      <div className={`list ${!preview ? 'greed-helper' : ''}`} ref={listRef}>\n        {pageIndex !== 0 && !isDone && (\n          <Tooltip className=\"remove-page\" placement=\"right\" title=\"delete\">\n            <Button\n              type=\"danger\"\n              icon=\"close\"\n              size=\"small\"\n              shape=\"circle\"\n              onClick={() => actions.deletePage(pageIndex)}\n            />\n          </Tooltip>\n        )}\n\n        {page.map((element, index) => (\n          <Box key={index} id={index} pageIndex={pageIndex} element={element} />\n        ))}\n\n        <span className=\"page\">{pageIndex + 1}</span>\n      </div>\n    </div>\n  );\n};\n\nexport { PageComponent };\n","import React, { FC } from 'react';\n\nimport { PDFViewer } from '@react-pdf/renderer';\n\nimport { DialogComponent } from 'components/dialog';\nimport { DocumentPDF } from 'components/documentPDF';\nimport { ElementControlComponent } from 'components/elementControl';\nimport { elements } from 'components/elements';\n\nimport { DocumentPage } from 'models';\n\nexport interface LeftPanelProps {\n  pages: DocumentPage[];\n  showPreview: boolean;\n  togglePreview: () => void;\n}\n\nconst LeftPanel: FC<LeftPanelProps> = props => {\n  const { pages, showPreview, togglePreview } = props;\n\n  return (\n    <div className=\"left-panel\">\n      {Object.values(elements).map(({ control }) => (\n        <ElementControlComponent key={control.name} control={control} />\n      ))}\n\n      <DialogComponent\n        open={showPreview}\n        title=\"Print document\"\n        width={1000}\n        bodyStyle={{ height: '70vh' }}\n        content={\n          <PDFViewer className=\"pdf-viewer\">\n            <DocumentPDF pages={pages} />\n          </PDFViewer>\n        }\n        onClose={togglePreview}\n        footer={null}\n      />\n    </div>\n  );\n};\n\nexport { LeftPanel };\n","import React, { FC, useContext } from 'react';\nimport { RouteComponentProps, withRouter } from 'react-router';\n\nimport { DndProvider } from 'react-dnd';\nimport HTML5Backend from 'react-dnd-html5-backend';\n\nimport { Button, Drawer, Icon, Layout, Typography } from 'antd';\n\nimport { PDFDownloadLink } from '@react-pdf/renderer';\n\nimport { Breadcrumb } from 'components/breadcrumb';\nimport { DialogComponent } from 'components/dialog';\nimport { DocumentPDF } from 'components/documentPDF';\nimport { EditorComponent } from 'components/editor';\nimport { PageComponent } from 'components/page';\n\nimport { LeftPanel } from './components';\n\nimport { useModal } from 'hooks';\nimport { FSContext } from 'state/context';\nimport { useEditorContext } from 'state/editor';\n\nimport { FILE_STATUS, FileSystemElement, FSTarget } from 'models';\n\nimport './styles.css';\n\nexport interface DocumentProps extends RouteComponentProps<{ id: string }> {}\n\nconst getStatusLabel = (fsElement: FileSystemElement | null): string => {\n  if (!fsElement) return '';\n\n  if (fsElement.status === FILE_STATUS.TEMPLATE) {\n    return 'Template';\n  }\n  if (fsElement.status === FILE_STATUS.DOCUMENT__DONE) {\n    return 'Done';\n  }\n  if (fsElement.status === FILE_STATUS.DOCUMENT_IN_PROGRESS) {\n    return 'In progress';\n  }\n\n  return '';\n};\n\nconst DocumentPageComponentR: FC<DocumentProps> = props => {\n  const {\n    pages,\n    isDone,\n    showPreview,\n    actions,\n    drawerVisible,\n    document,\n    preview,\n  } = useEditorContext();\n\n  const isInProgress = document && document.status === FILE_STATUS.DOCUMENT_IN_PROGRESS;\n\n  const [elementsModal, elementsModalActions] = useModal<FSTarget<FileSystemElement | null>>();\n  const { commit, removeById } = useContext(FSContext);\n\n  const handleAction = (value: 'commit' | 'delete') => () => {\n    const title =\n      value === 'commit' ? 'Are you sure you want to commit?' : 'Are you sure you want to delete?';\n\n    elementsModalActions.setModalState({\n      open: true,\n      title,\n      target: { value, item: document },\n    });\n  };\n\n  const handleElementsModalAction = async () => {\n    const { target } = elementsModal;\n\n    if (!target || !target.item) return;\n\n    if (target.value === 'commit') {\n      await commit(target.item.id);\n    }\n\n    if (target.value === 'delete') {\n      await removeById(target.item.id);\n    }\n\n    elementsModalActions.closeModal();\n\n    if (target.value === 'delete') {\n      props.history.goBack();\n    }\n  };\n\n  return (\n    <Layout className=\"document\">\n      <Layout.Header className=\"header\">\n        <Breadcrumb />\n\n        <Button.Group>\n          {!preview && !isDone && (\n            <Button onClick={actions.addPage}>\n              <Icon type=\"file\" theme=\"filled\" />\n              Add page\n            </Button>\n          )}\n\n          <Button onClick={actions.showPreviewHandler}>\n            Preview\n            <Icon type=\"file-done\" />\n          </Button>\n\n          <PDFDownloadLink document={<DocumentPDF pages={pages} />} fileName=\"somename.pdf\">\n            {({ blob, url, loading, error }) =>\n              loading ? (\n                'Loading document...'\n              ) : (\n                <Button>\n                  Download PDF\n                  <Icon type=\"download\" />\n                </Button>\n              )\n            }\n          </PDFDownloadLink>\n\n          <Button onClick={actions.togglePreview}>\n            Print\n            <Icon type=\"printer\" theme=\"filled\" />\n          </Button>\n\n          {!isDone && (\n            <Button onClick={handleAction('delete')}>\n              Delete\n              <Icon type=\"delete\" />\n            </Button>\n          )}\n\n          {isInProgress && (\n            <Button onClick={handleAction('commit')}>\n              Commit\n              <Icon type=\"file-done\" />\n            </Button>\n          )}\n        </Button.Group>\n\n        <Typography.Title level={4} code={true}>\n          {getStatusLabel(document)}\n        </Typography.Title>\n      </Layout.Header>\n\n      <Layout.Content className=\"content\">\n        <DndProvider backend={HTML5Backend}>\n          {!isDone && (\n            <LeftPanel\n              pages={pages}\n              showPreview={showPreview}\n              togglePreview={actions.togglePreview}\n            />\n          )}\n\n          <div className=\"pages\">\n            {pages.map((page, index: number) => (\n              <PageComponent\n                key={index}\n                pageIndex={index}\n                page={page}\n                actions={actions}\n                isDone={isDone}\n                preview={preview}\n              />\n            ))}\n          </div>\n          <Button type=\"primary\" onClick={actions.showDrawer}>\n            Settings\n          </Button>\n          <Drawer\n            title=\"Settings\"\n            width={720}\n            visible={drawerVisible}\n            onClose={actions.closeDrawer}\n          >\n            <EditorComponent />\n          </Drawer>\n        </DndProvider>\n      </Layout.Content>\n\n      <Layout.Footer className=\"footer\">Binale Software 2019</Layout.Footer>\n\n      <DialogComponent\n        open={elementsModal.open}\n        title={elementsModal.title}\n        content={elementsModal.content}\n        onAction={handleElementsModalAction}\n        onClose={elementsModalActions.closeModal}\n      />\n    </Layout>\n  );\n};\n\nexport const DocumentPageComponent = withRouter(DocumentPageComponentR);\n","import React, { FC } from 'react';\nimport { RouteComponentProps } from 'react-router-dom';\n\nimport { DocumentPageComponent } from './document';\n\nimport { useEditorContext } from 'state/editor';\n\ninterface DocumentPage extends RouteComponentProps<{ id: string }> {}\n\nconst DocumentPage: FC<DocumentPage> = props => {\n  const {\n    match: { params },\n  } = props;\n\n  return (\n    <useEditorContext.Provider fsElementId={params.id}>\n      <DocumentPageComponent />\n    </useEditorContext.Provider>\n  );\n};\n\nexport { DocumentPage };\n","import React, { FC } from 'react';\nimport { HashRouter, Redirect, Route, RouteComponentProps, Switch } from 'react-router-dom';\n\nimport { DashboardPage } from 'pages/dashboard';\nimport { DocumentPage } from 'pages/document';\n\nfunction renderLayout(props: RouteComponentProps<any, any>) {\n  // TODO: implement auth if it'll be needed\n  const loggedIn: boolean = true;\n\n  if (loggedIn) {\n    return <Redirect to=\"/dashboard/Root\" />;\n  } else {\n    return <Redirect to=\"/auth\" />;\n  }\n}\n\nexport const Router: FC = () => (\n  <HashRouter>\n    <Route exact={true} path=\"/\" render={renderLayout} />\n    <Switch>\n      <Route path=\"/dashboard/:id\" component={DashboardPage} />\n      <Route path=\"/document/:id\" component={DocumentPage} />\n    </Switch>\n  </HashRouter>\n);\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport { Router } from 'routing';\r\n\r\nimport { useModalContext } from 'state';\r\nimport { FSProvider } from 'state/context';\r\n\r\nimport 'assets/index.css';\r\n\r\nimport 'react-app-polyfill/ie11';\r\nimport { serviceWorker } from 'utils';\r\n\r\nReactDOM.render(\r\n  <FSProvider>\r\n    <useModalContext.Provider>\r\n      <Router />\r\n    </useModalContext.Provider>\r\n  </FSProvider>,\r\n  document.getElementById('root'),\r\n);\r\n\r\n// TODO: change unregister() to register() after deployment will done\r\n// http://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","module.exports = __webpack_public_path__ + \"static/media/logo.2fcb8508.png\";"],"sourceRoot":""}