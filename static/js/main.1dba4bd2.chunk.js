(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1023:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"register",function(){return _e}),n.d(a,"unregister",function(){return De});var r=n(1),l=n.n(r),o=n(14),c=n.n(o),i=n(69),s=n(173),u=(n(208),n(77)),m=(n(1028),n(513)),d=n(65),f=n.n(d),E=n(107),p=n(24),v=n(30),h=n(31),g=n(134),b=n(129),y=n(135),C=n(25),O=n.n(C);n(525),n(526);O.a.initializeApp({apiKey:"AIzaSyCopkTv3qV3lT5nE-TARB5FjBe-TwR8A8w",authDomain:"binale-software-invoicing.firebaseapp.com",databaseURL:"https://binale-software-invoicing.firebaseio.com",projectId:"binale-software-invoicing",storageBucket:"binale-software-invoicing.appspot.com",messagingSenderId:"878563105532",uploadString:"binale-software-invoicing.firebaseapp.com"});var w=O.a.firestore(),T={FOLDER:"FILE_SYSTEM_ELEMENT__FOLDER",DOCUMENT:"FILE_SYSTEM_ELEMENT__DOCUMENT"},N={DOCUMENT_IN_PROGRESS:"FILE_STATUS__DOCUMENT_IN_PROGRESS",DOCUMENT__DONE:"FILE_STATUS__DOCUMENT__DONE",TEMPLATE:"FILE_STATUS__TEMPLATE"},S="ELEMENT__TEXT",x="ELEMENT__BLOCK",k="ELEMENT__BORDER",j="ELEMENT__IMAGE",I="ELEMENT__TABLE",_=function(){},R=w.collection("documents"),D=l.a.createContext({fsItems:new Map,documents:R,parentForCreateFromTemplate:null,copiedElement:null,setParentForCreateFromTemplate:_,getFolderElementsTreeById:_,getFolderElementsById:_,getElement:_,commit:_,rename:_,removeById:_,createItem:_,copyItem:_,pasteItem:_}),F=function(e){function t(){var e,n;Object(v.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(g.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={fsItems:new Map,parentForCreateFromTemplate:null,copiedElement:null},n.collection=w.collection("folders"),n.unsubscribe=function(){},n.getFolderElementsTreeById=function(e,t){return n.getFolderElementsById(e,t).map(function(e){if(!e.id)return e;var a=n.getFolderElementsTreeById(e.id,t);return a.length>0?Object(p.a)({},e,{children:a}):e})},n.getFolderElementsById=function(e,t){var a=[];return n.state.fsItems.forEach(function(n){var r=!t||t&&n.type===t;n.parentId===e&&r&&a.push(Object(p.a)({},n))}),a},n.getElement=function(e){return e&&n.state.fsItems.get(e)||null},n.commit=function(e){return n.collection.doc(e).update({status:N.DOCUMENT__DONE})},n.rename=function(e){return n.collection.doc(e.id).update({name:e.name})},n.removeById=function(e){return n.collection.doc(e).delete()},n.createItem=function(){var e=Object(E.a)(f.a.mark(function e(t){var a,r,l;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.type!==T.DOCUMENT){e.next=13;break}if(a={name:t.name,content:"[[]]"},!t.formTemplate){e.next=9;break}return e.next=6,R.doc(t.documentId).get();case 6:r=e.sent,(a=r.data()).name=t.name;case 9:return e.next=11,R.add(a);case 11:l=e.sent,t.documentId=l.id;case 13:return e.next=15,n.collection.add(t);case 15:return e.abrupt("return",e.sent);case 18:throw e.prev=18,e.t0=e.catch(0),Error("File creation error "+e.t0);case 21:case"end":return e.stop()}},e,null,[[0,18]])}));return function(t){return e.apply(this,arguments)}}(),n.copyItem=function(e){n.setState({copiedElement:e})},n.pasteItem=function(){var e=Object(E.a)(f.a.mark(function e(t){var a,r,l;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.state.copiedElement){e.next=3;break}return e.abrupt("return");case 3:return r=Object(p.a)({},a,{parentId:t}),a.parentId===t&&(r.name="copy_".concat(r.name)),r.type===T.DOCUMENT&&(r.status===N.DOCUMENT__DONE&&(r.status=N.DOCUMENT_IN_PROGRESS),r.formTemplate=!0),e.next=8,n.createItem(r);case 8:return l=e.sent,n.setState({copiedElement:null}),e.abrupt("return",l);case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.setParentForCreateFromTemplate=function(e){n.setState({parentForCreateFromTemplate:e})},n}return Object(y.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.subscribe()}},{key:"componentWillReceiveProps",value:function(e){this.subscribe()}},{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"render",value:function(){var e=this.state,t=e.fsItems,n=e.copiedElement,a=e.parentForCreateFromTemplate;return l.a.createElement(D.Provider,{value:{fsItems:t,documents:R,copiedElement:n,parentForCreateFromTemplate:a,setParentForCreateFromTemplate:this.setParentForCreateFromTemplate,getFolderElementsTreeById:this.getFolderElementsTreeById,getFolderElementsById:this.getFolderElementsById,getElement:this.getElement,commit:this.commit,rename:this.rename,copyItem:this.copyItem,createItem:this.createItem,pasteItem:this.pasteItem,removeById:this.removeById}},this.props.children)}},{key:"subscribe",value:function(){var e=this;this.unsubscribe(),this.unsubscribe=this.collection.onSnapshot(function(t){var n=new Map;t.forEach(function(e){var t=e.data();t.id=e.id,n.set(e.id,t)}),e.setState({fsItems:n})})}}]),t}(l.a.PureComponent);n(528);function M(e){for(var t=[],n=e.fsItems.get(e.id);;){if(!n){t.reverse();break}var a=n,r=a.id,l=a.name,o=a.parentId;t.push({path:"/dashboard/".concat(r),breadcrumbName:l,children:[]}),n=e.fsItems.get(o)}return t}function A(e,t,n){return n.indexOf(e)===n.length-1?l.a.createElement("span",null,e.breadcrumbName):l.a.createElement(s.b,{to:e.path},e.breadcrumbName)}var z,P=Object(i.g)(function(e){var t=e.match.params.id;t=t||"Root";var n=Object(r.useContext)(D).fsItems;return l.a.createElement(m.a,{className:"breadcrumb",itemRender:A,routes:M({fsItems:n,id:t})})}),L=n(16),U=n(136),B=n(49),W=n(57),G=n.n(W),H=n(500),V=n.n(H),J=n(158),Y="explorer",X="document",K=[{data:[{name:"new folder",value:"new_folder",icon:"folder-add"},{name:"new file",value:"new_file",icon:"file-add"},{name:"past",value:"past",icon:"profile"}],currentId:"explorer"},{data:[{name:"edit",value:"edit-template",icon:"edit"},{name:"info",value:"info",icon:"info-circle"},{name:"download",value:"download",icon:"cloud-download"},{name:"copy",value:"copy",icon:"copy"},{name:"commit",value:"commit",icon:"file-done"},{name:"rename",value:"rename",icon:"edit"},{name:"delete",value:"delete",icon:"delete"}],currentId:"document"},{data:[{name:"copy",value:"copy",icon:"copy"},{name:"rename",value:"rename",icon:"edit"},{name:"delete",value:"delete",icon:"delete"}],currentId:"folder"}],q=(z={},Object(B.a)(z,T.FOLDER,"folder"),Object(B.a)(z,T.DOCUMENT,"document"),z),$=function(e){var t=q[e];if(t)return t;throw new Error("Error of FS element type: "+e)},Q=(n(266),n(120)),Z=(n(162),n(17)),ee=n(41),te=function(e){var t=e.style;return l.a.createElement(ee.h,{style:t})},ne=(n(718),function(e){var t=e.style;return l.a.createElement("div",{className:"block-element",style:t})}),ae=function(e){var t=e.style;return l.a.createElement(ee.h,{style:t})},re=(n(719),function(e){var t=e.style;return l.a.createElement("div",{className:"border-element",style:t})}),le=n(497),oe=12,ce="#ccc",ie="#fff",se="#ccc",ue="2pt 6pt",me="#000",de="solid",fe="".concat("1pt"," ").concat(de," ").concat(me),Ee=function(e){var t=e.row,n=e.column;return"".concat(t).concat("-").concat(n)},pe={table:{display:"flex",flexDirection:"column",border:fe,backgroundColor:ie,fontSize:oe},header:{display:"flex",flexDirection:"row",backgroundColor:ce,fontWeight:"bold"},footer:{display:"flex",flexDirection:"row",backgroundColor:se},row:{display:"flex",flexDirection:"row"},cell:{display:"flex",padding:ue}},ve=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object(le.a)(e),a=n[0],r=n.slice(1),l=t&&r.pop()||[];return{header:a,body:r,footer:l}},he=function(e,t,n,a,r,o,c,i){return function(s,u,m,d){return function(f,E){var v,h={current:u,length:m},g={current:E,length:s.length},b=n[Ee({row:u+("body"===d?1:0),column:E})]||{},y=b.colSpan,C=void 0===y?1:y,O=b.style,w=void 0===O?{}:O,T=t.borderWidth,N=t.borderStyle,S=t.borderColor,x=Object(U.a)(t,["borderWidth","borderStyle","borderColor"]);T&&N&&S&&(v="".concat(T," ").concat(N," ").concat(S));var k=Object(p.a)({width:"".concat(e*C,"%")},x,function(e,t,n){n=n||fe;var a={},r=e.current+1===e.length,l=t.current+1===t.length;return r||(a.borderBottom=n),l||(a.borderRight=n),a}(h,g,v),w);return l.a.createElement(a,{key:E,style:k,value:f,isActive:o,isDone:c,row:h.current+("body"===d?1:0),column:g.current,cellType:d,changeTable:r,actions:i})}}},ge=ee.f.create(pe),be=function(e){var t=e.value,n=e.style;return l.a.createElement(ee.h,{style:n},l.a.createElement(ee.g,null,t))},ye=function(e){var t=e.data,n=e.hasFooter,a=void 0!==n&&n,r=e.style,o=void 0===r?{}:r,c=e.cellsStyle,i=void 0===c?{}:c,s=ve(t,a),u=s.header,m=s.body,d=s.footer,f=100/u.length,E=t.length,v=he(f,Object(p.a)({},ge.cell,{backgroundColor:o.backgroundColor,borderWidth:o.borderWidth,borderStyle:o.borderStyle,borderColor:o.borderColor}),i,be);return l.a.createElement(ee.h,{style:Object(p.a)({},ge.table,o)},l.a.createElement(ee.h,{style:ge.header},u.map(v(u,0,E,"header"))),m.map(function(e,t){return l.a.createElement(ee.h,{style:Object(p.a)({},ge.row,{height:25}),key:t},e.map(v(e,t,E,"body")))}),d.length?l.a.createElement(ee.h,{style:ge.footer},d.map(v(d,E-1,E,"footer"))):null)},Ce=(n(183),n(73)),Oe=(n(92),n(32)),we=(n(1029),n(509)),Te=(n(222),n(178)),Ne=n(176),Se={open:!1,title:"",target:null,content:null};function xe(){var e=Object(r.useState)(Se),t=Object(L.a)(e,2),n=t[0],a=t[1];return[n,{setModalState:function(e){a(e)},closeModal:function(){a(Object(p.a)({},Se))}}]}function ke(e){var t=Object(r.useContext)(D),n=(t.fsItems,Object(U.a)(t,["fsItems"])),a=n.getFolderElementsById(e),l=a.filter(function(e){return e.isDefault}),o=a.filter(function(e){return e.status===N.DOCUMENT_IN_PROGRESS}),c=a.filter(function(e){return e.status!==N.DOCUMENT_IN_PROGRESS&&!e.isDefault});return Object(p.a)({items:a,elements:[l,o,c]},n)}var je=n(159),Ie=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function _e(e){if("serviceWorker"in navigator){if(new URL("/invoicing",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/invoicing","/service-worker.js");Ie?(!function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Re(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):Re(t,e)})}}function Re(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}function De(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}function Fe(e){if("object"!==typeof e)throw Error("Is not an object: "+e);var t=JSON.stringify(e);try{return JSON.parse(t)}catch(n){throw Error("Error when cloning: "+n)}}var Me,Ae=595.28,ze=841.89,Pe=function(e){return function(t,n){return n!==e}},Le=Symbol("pages");var Ue,Be=Object(Ne.a)(function(e){var t=Object(r.useContext)(D),n=t.getElement,a=t.documents,l=n(e.fsElementId),o=!!l&&l.status===N.DOCUMENT__DONE,c=Object(r.useState)([[]]),i=Object(L.a)(c,2),s=i[0],u=i[1];window[Le]=s,Object(r.useEffect)(function(){if(l){var e=a.doc(l.documentId).onSnapshot(function(e){console.log("subscribe");var t=e.data(),n=JSON.parse(t.content);Array.isArray(n)&&u(n)});return Me=setInterval(function(){var e=JSON.stringify(window[Le]);a.doc(l.documentId).update({content:e}),console.log("Document was updated")},5e3),function(){e(),clearInterval(Me),console.log("unsubscribe")}}},[l,a]);var m=Object(r.useState)(null),d=Object(L.a)(m,2),f=d[0],E=d[1],v=function(){return E(null)},h=function(e){return!!f&&f.id===e.id},g=Object(r.useState)(null),b=Object(L.a)(g,2),y=b[0],C=b[1],O=function(e,t,n,a){var r=Fe(tt[t].element);if(!r)throw new Error("Unknown element type: "+t);var l=window.screen.pixelDepth/10*2,o=r.size,c=Ae<n.x+o.width?Ae-o.width:n.x/l,i=ze<n.y+o.height?ze-o.height:n.y/l;r.position={x:c,y:i},r.id="f".concat((+new Date).toString(16)),a&&"value"in r&&(r.value=a);var m=s[e];s[e]=[].concat(Object(je.a)(m),[r]),u(Object(je.a)(s))},w=function(e,t,n){s[e][t]=Object(p.a)({},n),u(Object(je.a)(s))},T=Object(r.useState)(!1),S=Object(L.a)(T,2),x=S[0],k=S[1],j=Object(r.useState)(!1),I=Object(L.a)(j,2),_=I[0],R=I[1],F=Object(r.useState)(!1),M=Object(L.a)(F,2),A=M[0],z=M[1];return{document:l,activeId:y,activeElement:f,pages:s,isDone:o,preview:A,showPreview:x,drawerVisible:_,actions:{showPreviewHandler:function(){return z(!A)},addPage:function(){return u([].concat(Object(je.a)(s),[[]]))},deletePage:function(e){u(s.filter(Pe(e)))},addElement:O,changeElement:w,deleteElement:function(e,t){s[e]=s[e].filter(Pe(t)),u(Object(je.a)(s))},setActiveElement:function(e){h(e)?v():E(e)},resetActiveElement:v,isElementActive:h,addRowToTableElement:function(e,t,n){var a=n.data,r=n.hasFooter,l=a.length-(r?1:0),o=a[l].map(function(e){return"cell"});n.data.splice(l,0,o),w(e,t,n)},addColumnToTableElement:function(e,t,n){var a=n.data;n.data=a.map(function(e){return[].concat(Object(je.a)(e),["cell"])}),w(e,t,n)},addColSpan:function(e,t,n,a,r){if(!n.cellsStyle)throw new Error("Error: Table has not cell styles");var l=Fe(n.data);l[a].splice(r+1,1);var o=Ee({row:a,column:r});n.cellsStyle[o]=n.cellsStyle[o]||{};var c=n.cellsStyle[o].colSpan||1;n.cellsStyle[o]={colSpan:c+1,style:Object(p.a)({},n.cellsStyle[o].style)},n.data=l,w(e,t,n)},removeRowFromTableElement:function(e,t,n,a){var r=Fe(n.data);r.splice(a,1),n.data=r,w(e,t,n)},removeColumnFromTableElement:function(e,t,n,a){var r=Fe(n.data);r.forEach(function(e){return e.splice(a,1)}),n.data=r,w(e,t,n)},togglePreview:function(){return k(!x)},handleChangeText:function(e,t,n,a){a.value=n,w(e,t,a)},changeTextStyle:function(e,t,n,a,r){"underline"===r.style[n]&&(a="none"),"italic"===r.style[n]&&(a="normal"),"bold"===r.style[n]&&(a="normal"),"fontSize"===n&&(a="".concat(a,"pt")),r.style[n]=a,w(e,t,r)},setActiveId:function(e,t){return C({page:e,id:t})},resetActiveId:function(){return C(null)},handleChangeSettings:function(e,t,n,a,r){var l=Fe(f);l[r][n]=a,w(e,t,l)},addImage:function(e,t,n){var a=document.createElement("input");a.type="file";var r={},l="";a.onchange=function(a){var o=new FileReader;r=a.target.files[0],o.onload=function(a){l=a.target.result,O(e,t,n,l)},o.readAsDataURL(r)},a.click()},showDrawer:function(){return R(!0)},closeDrawer:function(){return R(!1)}}}}),We=(n(723),pe),Ge=function(e){var t=Be().preview,n=e.value,a=e.style,o=e.isActive,c=e.isDone,i=e.row,s=e.column,u=e.changeTable,m=e.cellType,d=Object(r.useState)(!1),f=Object(L.a)(d,2),E=f[0],p=f[1],v=function(){return p(!E)},h=Object(r.useRef)();Object(r.useEffect)(function(){E&&h&&h.current&&h.current.focus()},[E]);var g=function(e){u&&u(i,s,e.target.value),v()},b="header"===m?"cell header-cell":"cell";return E?l.a.createElement("div",{className:b,style:a},l.a.createElement(we.a.Item,{className:"cell-input"},l.a.createElement(Te.a.TextArea,{ref:h,autosize:!0,defaultValue:n,onPressEnter:g,onBlur:g}))):l.a.createElement("div",{className:b,style:a,onClick:function(){o&&!c&&v()}},"header"===m&&!t&&!c&&l.a.createElement("div",{className:"header-actions"},l.a.createElement(Ce.a,{placement:"top",title:"delete column"},l.a.createElement(Oe.a,{type:"danger",icon:"close",size:"small",shape:"circle",onClick:function(){e.actions&&e.actions.removeColumnFromTableElement(s)}}))),!c&&l.a.createElement("div",{className:"cell-actions"},l.a.createElement(Ce.a,{placement:"top",title:"combine with next cell"},l.a.createElement(Z.a,{type:"right-circle",theme:"filled",onClick:function(){e.actions&&e.actions.addColSpan(i,s)}}))),l.a.createElement("span",null,n))},He=function(e){var t=e.data,n=e.hasFooter,a=void 0!==n&&n,r=e.style,o=void 0===r?{}:r,c=e.cellsStyle,i=void 0===c?{}:c,s=e.innerRef,u=e.changeTable,m=e.actions,d=e.isActive,f=e.isDone,E=e.preview,v=ve(t,a),h=v.header,g=v.body,b=v.footer,y=100/h.length,C=t.length,O=he(y,Object(p.a)({},We.cell,{backgroundColor:o.backgroundColor,borderWidth:o.borderWidth,borderStyle:o.borderStyle,borderColor:o.borderColor}),i,Ge,u,d,f,m);return l.a.createElement(l.a.Fragment,null,!E&&!f&&l.a.createElement("div",{className:"table-element-controls"},l.a.createElement(Ce.a,{placement:"right",title:"add row"},l.a.createElement(Oe.a,{icon:"arrow-down",size:"small",shape:"circle",onClick:m.addRowToTableElement})),l.a.createElement(Ce.a,{placement:"right",title:"add column"},l.a.createElement(Oe.a,{icon:"arrow-right",size:"small",shape:"circle",onClick:m.addColumnToTableElement}))),l.a.createElement("div",{ref:s,className:"table-element",style:Object(p.a)({},We.table,o)},l.a.createElement("div",{style:We.header},h.map(O(h,0,C,"header"))),g.map(function(e,t){return l.a.createElement("div",{className:"row",style:We.row,key:t},!E&&!f&&l.a.createElement("div",{className:"row-actions"},l.a.createElement(Ce.a,{placement:"left",title:"delete row"},l.a.createElement(Oe.a,{type:"danger",icon:"close",size:"small",shape:"circle",onClick:function(){return m.removeRowFromTableElement(t)}}))),e.map(O(e,t,C,"body")))}),b.length?l.a.createElement("div",{style:We.footer},b.map(O(b,C-1,C,"footer"))):null))},Ve=function(e){var t=e.style,n=e.value;return l.a.createElement(ee.h,{style:t},l.a.createElement(ee.g,null,n))},Je=(n(762),Te.a.TextArea),Ye=function(e){var t=e.style,n=e.isActive,a=e.handleChangeText,r=e.value;return l.a.createElement("div",{className:"text-element"},n?l.a.createElement(Je,{autosize:!0,value:r,style:Object(p.a)({},t,{minHeight:"100%"}),onChange:function(e){return a(e.target.value)}}):l.a.createElement("div",{style:Object(p.a)({},t)},r))},Xe=function(e){var t=e.style,n=e.value;return l.a.createElement(ee.h,{style:t},l.a.createElement(ee.b,{src:n||""}))},Ke=(n(763),function(e){var t=e.value;return l.a.createElement("div",{style:{width:"100%",height:"100%",background:"url(".concat(t,") no-repeat"),backgroundSize:"100% 100%"}})}),qe={id:"default-text",type:S,position:{x:0,y:0},size:{width:200,height:200},style:{fontSize:"16pt",color:"#000"},value:"Text"},$e={id:"default-image",type:j,position:{x:0,y:0},size:{width:200,height:200},style:{backgroundColor:"black"},value:""},Qe={id:"default-block",type:x,position:{x:0,y:0},size:{width:200,height:200},style:{backgroundColor:"#000"}},Ze={id:"default-border",type:k,position:{x:0,y:0},size:{width:200,height:200},style:{borderWidth:"1pt",borderColor:"#000",borderStyle:"solid"}},et={id:"default-table",type:I,position:{x:0,y:0},size:{width:200,height:100},style:{backgroundColor:"white",borderWidth:"1pt",borderColor:"#000",borderStyle:"solid"},cellsStyle:{},hasFooter:!0,data:[["header 1","header 2"],["cell 1","cell 2"],["cell 3","cell 4"],["cell 5","cell 6"],["cell 3","cell 7"]]},tt=(Ue={},Object(B.a)(Ue,S,{control:{name:"Text",icon:"font-size",type:S},element:qe}),Object(B.a)(Ue,x,{control:{name:"Block",icon:"block",type:x},element:Qe}),Object(B.a)(Ue,k,{control:{name:"Border",icon:"border",type:k},element:Ze}),Object(B.a)(Ue,j,{control:{name:"Image",icon:"picture",type:j},element:$e}),Object(B.a)(Ue,I,{control:{name:"Table",icon:"table",type:I},element:et}),Ue),nt=function(e){var t=e.pages;return l.a.createElement(ee.a,null,t.map(function(e,t){return l.a.createElement(ee.e,{key:t},e.map(function(e,t){var n=Object(p.a)({position:"absolute",top:e.position.y,left:e.position.x,width:e.size.width,height:e.size.height},e.style);if(e.type===x)return l.a.createElement(te,{key:t,style:n});if(e.type===k)return l.a.createElement(ae,{key:t,style:n});if(e.type===S&&"value"in e)return l.a.createElement(Ve,{key:t,style:n,value:e.value});if(e.type===j&&"value"in e)return l.a.createElement(Xe,{key:t,style:n,value:e.value});if(e.type===I&&"hasFooter"in e){var a=e.data,r=e.hasFooter,o=e.cellsStyle;return n.top+=30,delete n.height,l.a.createElement(ye,{key:t,data:a,hasFooter:r,style:n,cellsStyle:o})}return null}))}))},at=(n(764),Object(J.d)(X)(function(e){var t=e.currentId,n=e.trigger,a=e.onChange,o=e.data;n&&n.item&&(n.item.status===N.DOCUMENT_IN_PROGRESS&&(o=o.filter(function(e){return"edit-template"!==e.value})),n.item.status===N.DOCUMENT__DONE&&(o=o.filter(function(e){return!["delete","commit","edit-template","rename"].includes(e.value)})),n.item.status===N.TEMPLATE&&(o=o.filter(function(e){return!["commit","download"].includes(e.value)})));var c=Object(r.useState)([]),i=Object(L.a)(c,2),s=i[0],u=i[1],m=Object(r.useContext)(D).documents;Object(r.useEffect)(function(){if(n&&n.item){var e=m.doc(n.item.documentId).onSnapshot(function(e){var t=e.data(),n=JSON.parse(t.content);u(n)});return function(){e()}}},[m,n]);var d=n&&n.item?"".concat(n.item.name,".pdf"):"";return l.a.createElement(J.a,{id:t,className:"context-menu"},l.a.createElement(Q.b,{selectable:!1},o.map(function(e){return l.a.createElement(Q.b.Item,{key:e.name},l.a.createElement(J.c,{key:e.name,data:e,onClick:a},"download"===e.value?l.a.createElement(ee.c,{key:e.name,document:l.a.createElement(nt,{pages:s}),fileName:d},function(t){t.blob,t.url;var n=t.loading;return t.error,n?"Document loading...":l.a.createElement(l.a.Fragment,null,l.a.createElement(Z.a,{type:e.icon,className:"delete"===e.value?"alert":"primary"}),l.a.createElement("span",null,e.name))}):l.a.createElement(l.a.Fragment,null,l.a.createElement(Z.a,{type:e.icon,className:"delete"===e.value?"alert":"primary"}),l.a.createElement("span",null,e.name))))})))})),rt=(n(425),n(261)),lt=function(e){var t=e.open,n=e.title,a=e.content,r=e.width,o=e.bodyStyle,c=e.onAction,i=e.onClose,s=e.footer;return l.a.createElement(rt.a,{width:r,bodyStyle:o,visible:t,title:n,onOk:c,onCancel:i,footer:s},a)},ot=n(356),ct=n.n(ot),it=function(e){var t=e.expanded;return l.a.createElement(G.a,{type:t?"folder-open":"folder",theme:"filled"})},st=function(e){var t=e.data,n=e.onSelect;return l.a.createElement(ct.a,{showIcon:!0,switcherIcon:l.a.createElement(G.a,{type:"down"}),onSelect:function(e,t){t.node.props.data&&n(t.node.props.data)}},function e(t){return t.map(function(t){return l.a.createElement(ct.a.TreeNode,{data:t,key:t.id,icon:it,title:t.name},t.children?e(t.children):null)})}(t))},ut={CREATE_FOLDER:"CREATE_FOLDER",CREATE_DOCUMENT:"CREATE_DOCUMENT",CREATE_DOCUMENT_FROM_TEMPLATE:"CREATE_DOCUMENT_FROM_TEMPLATE",RENAME_FS_ITEM:"RENAME_FS_ITEM"};var mt=Object(Ne.a)(function(){var e=Object(r.useState)(!1),t=Object(L.a)(e,2),n=t[0],a=t[1],l=Object(r.useState)(ut.CREATE_FOLDER),o=Object(L.a)(l,2),c=o[0],i=o[1],s=Object(r.useState)(null),u=Object(L.a)(s,2),m=u[0],d=u[1];return{open:n,mode:c,modalToggle:function(e,t){a(!n),i(e||ut.CREATE_FOLDER),d(t)},target:m,setTarget:d}}),dt=(Object(Ne.a)(ke),function(e){if(e===ut.CREATE_DOCUMENT)return"Create new document";if(e===ut.CREATE_FOLDER)return"Create new folder";if(e===ut.CREATE_DOCUMENT_FROM_TEMPLATE)return"Create document from template";if(e===ut.RENAME_FS_ITEM)return"Rename element";throw new Error("Unknown mode: "+e)}),ft=Object(i.g)(function(e){var t=Object(r.useState)(""),n=Object(L.a)(t,2),a=n[0],o=n[1],c=mt(),i=c.open,s=c.mode,u=c.modalToggle,m=c.target,d=Object(r.useContext)(D),v=d.fsItems,h=d.createItem,g=d.rename,b=d.parentForCreateFromTemplate,y=e.match,C=e.history,O=function(){u(),o("")},w=function(){var e=Object(E.a)(f.a.mark(function e(){var t,n,r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t={name:a,parentId:y.params.id,type:T.FOLDER},s!==ut.CREATE_DOCUMENT){e.next=8;break}if(n=v.get(y.params.id)){e.next=5;break}return e.abrupt("return");case 5:r="Vorlage"===n.name,t.type=T.DOCUMENT,t.status=r?N.TEMPLATE:N.DOCUMENT_IN_PROGRESS;case 8:if(s!==ut.CREATE_DOCUMENT_FROM_TEMPLATE){e.next=16;break}if(b&&b.id){e.next=11;break}return e.abrupt("return");case 11:t.parentId=b.id,t.type=T.DOCUMENT,t.status=N.DOCUMENT_IN_PROGRESS,t.formTemplate=!0,t.documentId=m.documentId;case 16:return e.next=18,h(t);case 18:O(),s===ut.CREATE_DOCUMENT_FROM_TEMPLATE&&b&&C.push({pathname:"".concat(b.id)});case 20:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(E.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,s!==ut.RENAME_FS_ITEM){e.next=7;break}return e.next=4,g(Object(p.a)({},m,{name:a}));case 4:O(),e.next=8;break;case 7:w();case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("Error on create FS element",e.t0);case 13:case"end":return e.stop()}},e,null,[[0,10]])}));return function(){return e.apply(this,arguments)}}(),x=s===ut.RENAME_FS_ITEM?m.name:"";return l.a.createElement(rt.a,{visible:i,title:dt(s),onOk:S,onCancel:O},i&&l.a.createElement(Te.a,{autoFocus:!0,onChange:function(e){o(e.target.value)},defaultValue:x}))}),Et={}.hasOwnProperty;n(782),n(784);var pt=function(e){return function e(){for(var t=[],n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];for(var l=0,o=a;l<o.length;l++){var c=o[l];if(c){var i=typeof c;if("string"===i||"number"===i)t.push(c);else if(Array.isArray(c))t.push(e.apply(null,c));else if("object"===i)for(var s=c,u=0,m=Object.keys(s);u<m.length;u++){var d=m[u];Et.call(s,d)&&s[d]&&t.push(d)}}}return t.join(" ")}({"fs-element":!0,"in-progress":e.status===N.DOCUMENT_IN_PROGRESS})},vt=Object(i.g)(function(e){var t=e.match,n=e.history,a=ke(t.params.id),r=(a.items,a.elements),o=a.copiedElement,c=(a.parentForCreateFromTemplate,Object(U.a)(a,["items","elements","copiedElement","parentForCreateFromTemplate"])),i=xe(),s=Object(L.a)(i,2),u=s[0],m=s[1],d=mt().modalToggle,v=function(e){return function(){if(e.type===T.FOLDER)n.push({pathname:"".concat(e.id)});else if(e.status===N.TEMPLATE){var t={item:e,name:"new_file_from_template",value:"new_file_from_template"};m.setModalState({open:!0,title:"Create document from template",target:t,content:l.a.createElement(st,{data:c.getFolderElementsTreeById("Root",T.FOLDER),onSelect:c.setParentForCreateFromTemplate})})}else n.push("/document/".concat(e.id))}},h=function(e,a){switch(a.value){case"new_file":return d(ut.CREATE_DOCUMENT);case"new_folder":return d(ut.CREATE_FOLDER);case"rename":return d(ut.RENAME_FS_ITEM,a.item);case"edit-template":return n.push("/document/".concat(a.item.id));case"past":return c.pasteItem(t.params.id);case"delete":if(a.item.isDefault)return;return m.setModalState({open:!0,title:"Are you sure you want to delete?",target:a});case"download":return console.log("download",e,a);case"info":var r=l.a.createElement(V.a,{size:"small",bordered:!0,showHeader:!1,pagination:!1,columns:[{dataIndex:"title"},{dataIndex:"date"}],dataSource:[{title:"Created",date:"19.02.2019"},{title:"Updated",date:"19.02.2019"}]});return m.setModalState({open:!0,title:"Document information",target:a,content:r});case"copy":return c.copyItem(a.item);case"commit":return m.setModalState({open:!0,title:"Are you sure you want to commit?",target:a});default:return}},g=function(){var e=Object(E.a)(f.a.mark(function e(){var t,n,a,r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(u.target){e.next=2;break}return e.abrupt("return");case 2:if(t=u.target,n=t.value,a=t.name,r=t.item,n&&r){e.next=5;break}return e.abrupt("return");case 5:if(e.prev=5,"delete"!==n){e.next=9;break}return e.next=9,c.removeById(r.id);case 9:if("commit"!==n){e.next=12;break}return e.next=12,c.commit(r.id);case 12:"new_file_from_template"===n&&d(ut.CREATE_DOCUMENT_FROM_TEMPLATE,r),m.closeModal(),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),console.log("Error on ".concat(a," FS element"),e.t0);case 19:case"end":return e.stop()}},e,null,[[5,16]])}));return function(){return e.apply(this,arguments)}}();return l.a.createElement(J.b,{id:Y},l.a.createElement("div",{className:"explorer"},r.map(function(e,t){return l.a.createElement("div",{key:t,className:"root"},e.map(function(e){return l.a.createElement(J.b,{key:e.id,collect:function(t){return Object(p.a)({},t,{item:e})},id:e.isDefault?"":$(e.type)},l.a.createElement("div",{className:pt(e),onClick:v(e)},function(e){var t,n="sync";e.status===N.TEMPLATE&&(n="layout"),e.status===N.DOCUMENT__DONE&&(n="check-circle");var a="lock";return"Vorlage"===e.name&&(a="layout"),(t={},Object(B.a)(t,T.FOLDER,l.a.createElement(l.a.Fragment,null,e.isDefault&&l.a.createElement(G.a,{className:"marker",type:a}),l.a.createElement(G.a,{className:"icon folder",type:"folder",theme:"filled"}))),Object(B.a)(t,T.DOCUMENT,l.a.createElement(l.a.Fragment,null,l.a.createElement(G.a,{className:"marker doc",type:n}),l.a.createElement(G.a,{className:"icon",type:"file",theme:"filled"}))),t)[e.type]}(e),l.a.createElement("span",{className:"text"},e.name)))}))})),K.map(function(e){var n=e.data,a=c.getElement(t.params.id),r=!!a&&"Vorlage"===a.name;return e.currentId===Y&&(n=e.data.filter(function(e){return"past"!==e.value||o&&(o.status!==N.TEMPLATE&&!r||o.status===N.TEMPLATE&&r)})),l.a.createElement(at,{key:e.currentId,data:n,currentId:e.currentId,onChange:h})}),l.a.createElement(ft,null),l.a.createElement(lt,{open:u.open,title:u.title,content:u.content,onAction:g,onClose:m.closeModal}))}),ht=n(502),gt=n.n(ht),bt=(n(846),function(e){var t=Object(r.useState)(!1),n=Object(L.a)(t,2),a=n[0],o=n[1],c=mt().modalToggle;return l.a.createElement(u.a.Sider,{collapsible:!0,collapsed:a,onCollapse:o},l.a.createElement(s.b,{to:"/",className:"logoContainer"},l.a.createElement("img",{className:"logo",alt:"logo",src:gt.a}),"binale".split("").map(function(e,t){return l.a.createElement("span",{key:t,className:"logoText"},e)})),l.a.createElement(Q.b,{theme:"dark",selectable:!1,onClick:function(e){"file"===e.key&&c(ut.CREATE_DOCUMENT),"folder"===e.key&&c(ut.CREATE_FOLDER)}},[{key:"folder",text:"New folder",icon:"folder-add"},{key:"file",text:"New document",icon:"file-add"}].map(function(e){return l.a.createElement(Q.b.Item,{key:e.key},l.a.createElement(Z.a,{type:e.icon}),l.a.createElement("span",null,e.text))})))}),yt=(n(847),function(e){return l.a.createElement(u.a,{className:"layout"},l.a.createElement(bt,null),e.children)}),Ct=(n(848),function(e){return l.a.createElement(yt,null,l.a.createElement(u.a,{className:"dashboard"},l.a.createElement(u.a.Header,{className:"header"}),l.a.createElement(u.a.Content,{className:"content"},l.a.createElement(P,null),l.a.createElement("div",{className:"main"},l.a.createElement(vt,null))),l.a.createElement(u.a.Footer,{className:"footer"},"Binale Software \xa92019")))}),Ot=(n(849),n(512)),wt=(n(851),n(511)),Tt=n(177),Nt=n(510),St=(n(196),n(45)),xt=n(133),kt=n.n(xt),jt=(n(238),{position:"absolute",zIndex:"2"}),It={position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"},_t=function(e){var t=e.handleChangeSettings,n=e.activeElement,a=n.size,o=n.position,c=n.style,i=(n.type,Object(r.useState)(!1)),s=Object(L.a)(i,2),u=s[0],m=s[1],d=function(e){return e||null}(c);return l.a.createElement("div",{className:"block-settings-editor"},l.a.createElement("div",{className:"fields"},l.a.createElement("span",null,"Width:"),l.a.createElement(St.a,{value:a.width,size:"small",onChange:function(e){return t("width",e,"size")}})),l.a.createElement("div",{className:"fields"},l.a.createElement("span",null,"Height:"),l.a.createElement(St.a,{value:a.height,size:"small",onChange:function(e){return t("height",e,"size")}})),l.a.createElement("div",{className:"fields"},l.a.createElement("span",null,"X:"),l.a.createElement(St.a,{value:o.x,size:"small",onChange:function(e){return t("x",e,"position")}})),l.a.createElement("div",{className:"fields"},l.a.createElement("span",null,"Y:"),l.a.createElement(St.a,{value:o.y,size:"small",onChange:function(e){return t("y",e,"position")}})),l.a.createElement("div",null,"Background: ",l.a.createElement(Oe.a,{icon:"bg-colors",className:"icon-settings",onClick:function(){m(!u)}}),u?l.a.createElement("div",{style:jt},l.a.createElement("div",{style:It,onClick:function(){m(!1)}}),l.a.createElement(kt.a,{color:d.backgroundColor,onChangeComplete:function(e){return t("backgroundColor",e.hex,"style")}})):null))},Rt={position:"absolute",zIndex:"2"},Dt={position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"},Ft=function(e){var t=e.handleChangeSettings,n=e.activeElement,a=n.size,o=n.position,c=n.style,i=Object(r.useState)(!1),s=Object(L.a)(i,2),u=s[0],m=s[1],d=function(e){return e||null}(c);return l.a.createElement("div",{className:"block-settings-editor"},l.a.createElement("div",{className:"fields"},l.a.createElement("span",null,"Width:"),l.a.createElement(St.a,{value:a.width,size:"small",onChange:function(e){return t("width",e,"size")}})),l.a.createElement("div",{className:"fields"},l.a.createElement("span",null,"Height:"),l.a.createElement(St.a,{value:a.height,size:"small",onChange:function(e){return t("height",e,"size")}})),l.a.createElement("div",{className:"fields"},l.a.createElement("span",null,"X:"),l.a.createElement(St.a,{value:o.x,size:"small",onChange:function(e){return t("x",e,"position")}})),l.a.createElement("div",{className:"fields"},l.a.createElement("span",null,"Y:"),l.a.createElement(St.a,{value:o.y,size:"small",onChange:function(e){return t("y",e,"position")}})),l.a.createElement("div",{className:"fields"},l.a.createElement("span",null,"Border:"),l.a.createElement(St.a,{value:d.borderWidth,size:"small",onChange:function(e){return t("borderWidth",e,"style")}})),l.a.createElement("div",null,"Border Color: ",l.a.createElement(Oe.a,{icon:"bg-colors",className:"icon-settings",onClick:function(){m(!u)}}),u?l.a.createElement("div",{style:Rt},l.a.createElement("div",{style:Dt,onClick:function(){m(!1)}}),l.a.createElement(kt.a,{color:d.backgroundColor,onChangeComplete:function(e){return t("borderColor",e.hex,"style")}})):null))},Mt=function(e){var t=e.handleChangeSettings,n=e.activeElement,a=n.size,r=n.position;return l.a.createElement("div",{className:"block-settings-editor"},l.a.createElement("div",{className:"fields"},l.a.createElement("span",null,"Width:"),l.a.createElement(St.a,{value:a.width,size:"small",onChange:function(e){return t("width",e,"size")}})),l.a.createElement("div",{className:"fields"},l.a.createElement("span",null,"Height:"),l.a.createElement(St.a,{value:a.height,size:"small",onChange:function(e){return t("height",e,"size")}})),l.a.createElement("div",{className:"fields"},l.a.createElement("span",null,"X:"),l.a.createElement(St.a,{value:r.x,size:"small",onChange:function(e){return t("x",e,"position")}})),l.a.createElement("div",{className:"fields"},l.a.createElement("span",null,"Y:"),l.a.createElement(St.a,{value:r.y,size:"small",onChange:function(e){return t("y",e,"position")}})))},At={position:"absolute",zIndex:"2"},zt={position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"},Pt=function(e){var t=e.handleChangeSettings,n=e.activeElement,a=n.size,o=n.position,c=n.style,i=(n.type,Object(r.useState)(!1)),s=Object(L.a)(i,2),u=s[0],m=s[1],d=Object(r.useState)(!1),f=Object(L.a)(d,2),E=f[0],p=f[1],v=function(e){return e||null}(c);return l.a.createElement("div",{className:"block-settings-editor"},l.a.createElement("div",{className:"fields"},l.a.createElement("span",null,"Width:"),l.a.createElement(St.a,{value:a.width,size:"small",onChange:function(e){return t("width",e,"size")}})),l.a.createElement("div",{className:"fields"},l.a.createElement("span",null,"Height:"),l.a.createElement(St.a,{value:a.height,size:"small",onChange:function(e){return t("height",e,"size")}})),l.a.createElement("div",{className:"fields"},l.a.createElement("span",null,"X:"),l.a.createElement(St.a,{value:o.x,size:"small",onChange:function(e){return t("x",e,"position")}})),l.a.createElement("div",{className:"fields"},l.a.createElement("span",null,"Y:"),l.a.createElement(St.a,{value:o.y,size:"small",onChange:function(e){return t("y",e,"position")}})),l.a.createElement("div",{className:"fields"},l.a.createElement("span",null,"Border:"),l.a.createElement(St.a,{value:v.borderWidth,size:"small",onChange:function(e){return t("borderWidth",e,"style")}})),l.a.createElement("div",null,"Background: ",l.a.createElement(Oe.a,{icon:"bg-colors",className:"icon-settings",onClick:function(){m(!u)}}),u?l.a.createElement("div",{style:At},l.a.createElement("div",{style:zt,onClick:function(){m(!1)}}),l.a.createElement(kt.a,{color:v.backgroundColor,onChangeComplete:function(e){return t("backgroundColor",e.hex,"style")}})):null),l.a.createElement("div",null,"Border Color:"," ",l.a.createElement(Oe.a,{icon:"bg-colors",className:"icon-settings",onClick:function(){p(!E)}}),E?l.a.createElement("div",{style:At},l.a.createElement("div",{style:zt,onClick:function(){p(!1)}}),l.a.createElement(kt.a,{color:v.backgroundColor,onChangeComplete:function(e){return t("borderColor",e.hex,"style")}})):null))},Lt=(n(925),function(){var e=Be(),t=e.actions,n=e.activeId,a=e.activeElement,r=e.isDone;return l.a.createElement("div",{className:"editor-container"},l.a.createElement("div",{className:"editor-page"},"Page settings"),!r&&!!a&&l.a.createElement("div",{className:"editor-settings"},function(e,t){var n;return n={},Object(B.a)(n,x,l.a.createElement(_t,{activeElement:e,handleChangeSettings:t})),Object(B.a)(n,k,l.a.createElement(Ft,{activeElement:e,handleChangeSettings:t})),Object(B.a)(n,j,l.a.createElement(Mt,{activeElement:e,handleChangeSettings:t})),Object(B.a)(n,I,l.a.createElement(Pt,{activeElement:e,handleChangeSettings:t})),n}(a,function(e,r,l){t.handleChangeSettings(n.page,n.id,e,r,l,a)})[a.type]))}),Ut=(n(926),"DND_CONTROL_TYPE__BOX"),Bt=function(e){var t=e.control,n=Object(Tt.c)({item:{type:Ut,element:t.type}}),a=Object(L.a)(n,2)[1];return l.a.createElement("div",null,l.a.createElement("div",{className:"element-control",ref:a},l.a.createElement(Z.a,{type:t.icon}),l.a.createElement("span",{className:"text"},t.name)))},Wt=n(505),Gt=n(507),Ht=(n(962),[{icon:"align-left",style:"textAlign",value:"left"},{icon:"align-center",style:"textAlign",value:"center"},{icon:"align-right",style:"textAlign",value:"right"},{icon:"underline",style:"textDecoration",value:"underline"},{icon:"bold",style:"fontWeight",value:"bold"},{icon:"italic",style:"fontWeight",value:"italic"}]),Vt={position:"absolute",zIndex:"2"},Jt={position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"},Yt=function(e){var t=e.changeTextStyle,n=e.element.style,a=Object(r.useState)(!1),o=Object(L.a)(a,2),c=o[0],i=o[1];return l.a.createElement("div",{className:"text-settings-root"},l.a.createElement("div",{className:"font-setting"},l.a.createElement(Z.a,{type:"font-size",className:"icon-settings"}),l.a.createElement(St.a,{value:n.fontSize,onChange:function(e){return t("fontSize",e)}})),l.a.createElement(Oe.a,{icon:"font-colors",className:"icon-settings",onClick:function(){i(!c)}}),c?l.a.createElement("div",{style:Vt},l.a.createElement("div",{style:Jt,onClick:function(){i(!1)}}),l.a.createElement(Gt.ChromePicker,{color:n.color,onChangeComplete:function(e){return t("color",e.hex)}})):null,Ht.map(function(e,n){return l.a.createElement(Oe.a,{icon:e.icon,key:n,className:"icon-settings",onClick:function(){return t(e.style,e.value)}})}))},Xt=(n(468),function(e,t){return t.type===I&&e.current?e.current.getBoundingClientRect().height:t.size.height}),Kt=function(e,t){var n={bottom:!1,bottomLeft:!1,bottomRight:!1,right:!1,left:!1,top:!1,topLeft:!1,topRight:!1};return e===I?(n.right=!t,n):t?n:void 0},qt=function(e){var t=e.id,n=e.pageIndex,a=e.element,o=Be(),c=o.isDone,i=o.activeElement,s=o.actions,u=o.preview,m=i&&i.type===S,d=Object(r.useRef)(),f=a.position,E=a.size,p=s.isElementActive(a),v=c?"":"dnd-box";return l.a.createElement(Wt.a,{className:v,bounds:"parent",position:f,size:{width:E.width,height:Xt(d,a)},onClick:function(e){return function(e){return e.stopPropagation()}(e)},onDoubleClick:function(e){u||(s.setActiveElement(a),s.setActiveId(n,t),s.showDrawer())},disableDragging:p||c||u,onDragStop:function(e,r){a.position.x=r.x,a.position.y=r.y,s.changeElement(n,t,a)},enableResizing:Kt(a.type,c),onResizeStop:function(e,r,l,o,c){var i=l.getBoundingClientRect(),u=i.width,m=i.height;a.position.x=c.x,a.position.y=c.y,a.size.width=u,a.size.height=m,s.changeElement(n,t,a)}},!c&&p&&l.a.createElement(Ce.a,{className:"remove-btn",placement:"right",title:"delete"},l.a.createElement(Oe.a,{type:"danger",icon:"close",size:"small",shape:"circle",onClick:function(){return s.deleteElement(n,t)}})),!c&&p&&m&&l.a.createElement(Yt,{changeTextStyle:function(e,r){s.changeTextStyle(n,t,e,r,a)},element:a}),function(e,t,n,a,r,o,c,i,s,u,m,d){if(!e)return null;if(e.type===x)return l.a.createElement(ne,{style:e.style});if(e.type===k)return l.a.createElement(re,{style:e.style});if(e.type===I&&"hasFooter"in e){var f=e.data,E=e.hasFooter,p=e.style,v=e.cellsStyle;return l.a.createElement(He,{innerRef:t,data:f,hasFooter:E,style:p,cellsStyle:v,isActive:s,isDone:u,changeTable:n,preview:d,actions:{addColSpan:a,addRowToTableElement:r,addColumnToTableElement:o,removeRowFromTableElement:c,removeColumnFromTableElement:i}})}return e.type===j&&"value"in e?l.a.createElement(Ke,{style:e.style,value:e.value}):e.type===S&&"value"in e?l.a.createElement(Ye,{style:e.style,isActive:s,value:e.value,handleChangeText:m}):void 0}(a,d,function(e,r,l){a.data[e][r]=l,s.changeElement(n,t,a)},function(e,r){s.addColSpan(n,t,a,e,r)},function(){s.addRowToTableElement(n,t,a)},function(){s.addColumnToTableElement(n,t,a)},function(e){s.removeRowFromTableElement(n,t,a,e)},function(e){s.removeColumnFromTableElement(n,t,a,e)},p,c,function(e){s.handleChangeText(n,t,e,a)},u))},$t=function(e){var t=e.pageIndex,n=e.page,a=e.isDone,o=e.actions,c=e.preview,i=Object(r.useState)(document.body.getBoundingClientRect()),s=Object(L.a)(i,2),u=s[0],m=s[1],d=Object(r.useState)(u.top),f=Object(L.a)(d,2),E=f[0],p=f[1],v=Object(r.useRef)(),h=Object(Tt.d)({accept:Ut,drop:function(e,n){var a=n.getClientOffset();if(b&&a){a.x=a.x-v.current.offsetLeft,a.y=a.y-v.current.offsetTop+E,e.element===j?o.addImage(t,e.element,a):o.addElement(t,e.element,a);n.didDrop()}},collect:function(e){return{isOver:e.isOver(),isOverCurrent:e.isOver({shallow:!0})}}}),g=Object(L.a)(h,2),b=g[0],y=g[1],C=function(){m(document.body.getBoundingClientRect()),p(-u.top)};return Object(r.useEffect)(function(){return window.addEventListener("scroll",C),function(){window.removeEventListener("scroll",C)}}),l.a.createElement("div",{className:"list-container",ref:y,onClick:function(){o.resetActiveElement(),o.resetActiveId()}},l.a.createElement("div",{className:"list ".concat(c?"":"greed-helper"),ref:v},0!==t&&!a&&l.a.createElement(Ce.a,{className:"remove-page",placement:"right",title:"delete"},l.a.createElement(Oe.a,{type:"danger",icon:"close",size:"small",shape:"circle",onClick:function(){return o.deletePage(t)}})),n.map(function(e,n){return l.a.createElement(qt,{key:n,id:n,pageIndex:t,element:e})}),l.a.createElement("span",{className:"page"},t+1)))},Qt=function(e){var t=e.pages,n=e.showPreview,a=e.togglePreview;return l.a.createElement("div",{className:"left-panel"},Object.values(tt).map(function(e){var t=e.control;return l.a.createElement(Bt,{key:t.name,control:t})}),l.a.createElement(lt,{open:n,title:"Print document",width:1e3,bodyStyle:{height:"70vh"},content:l.a.createElement(ee.d,{className:"pdf-viewer"},l.a.createElement(nt,{pages:t})),onClose:a,footer:null}))},Zt=(n(963),Object(i.g)(function(e){var t,n=Be(),a=n.pages,o=n.isDone,c=n.showPreview,i=n.actions,s=n.drawerVisible,m=n.document,d=n.preview,p=m&&m.status===N.DOCUMENT_IN_PROGRESS,v=xe(),h=Object(L.a)(v,2),g=h[0],b=h[1],y=Object(r.useContext)(D),C=y.commit,O=y.removeById,w=function(e){return function(){var t="commit"===e?"Are you sure you want to commit?":"Are you sure you want to delete?";b.setModalState({open:!0,title:t,target:{value:e,item:m}})}},T=function(){var t=Object(E.a)(f.a.mark(function t(){var n;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if((n=g.target)&&n.item){t.next=3;break}return t.abrupt("return");case 3:if("commit"!==n.value){t.next=6;break}return t.next=6,C(n.item.id);case 6:if("delete"!==n.value){t.next=9;break}return t.next=9,O(n.item.id);case 9:b.closeModal(),"delete"===n.value&&e.history.goBack();case 11:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}();return l.a.createElement(u.a,{className:"document"},l.a.createElement(u.a.Header,{className:"header"},l.a.createElement(P,null),l.a.createElement(Oe.a.Group,null,!d&&!o&&l.a.createElement(Oe.a,{onClick:i.addPage},l.a.createElement(Z.a,{type:"file",theme:"filled"}),"Add page"),l.a.createElement(Oe.a,{onClick:i.showPreviewHandler},"Preview",l.a.createElement(Z.a,{type:"file-done"})),l.a.createElement(ee.c,{document:l.a.createElement(nt,{pages:a}),fileName:"somename.pdf"},function(e){e.blob,e.url;var t=e.loading;return e.error,t?"Loading document...":l.a.createElement(Oe.a,null,"Download PDF",l.a.createElement(Z.a,{type:"download"}))}),l.a.createElement(Oe.a,{onClick:i.togglePreview},"Print",l.a.createElement(Z.a,{type:"printer",theme:"filled"})),!o&&l.a.createElement(Oe.a,{onClick:w("delete")},"Delete",l.a.createElement(Z.a,{type:"delete"})),p&&l.a.createElement(Oe.a,{onClick:w("commit")},"Commit",l.a.createElement(Z.a,{type:"file-done"}))),l.a.createElement(wt.a.Title,{level:4,code:!0},(t=m)?t.status===N.TEMPLATE?"Template":t.status===N.DOCUMENT__DONE?"Done":t.status===N.DOCUMENT_IN_PROGRESS?"In progress":"":"")),l.a.createElement(u.a.Content,{className:"content"},l.a.createElement(Tt.b,{backend:Nt.a},!o&&l.a.createElement(Qt,{pages:a,showPreview:c,togglePreview:i.togglePreview}),l.a.createElement("div",{className:"pages"},a.map(function(e,t){return l.a.createElement($t,{key:t,pageIndex:t,page:e,actions:i,isDone:o,preview:d})})),l.a.createElement(Oe.a,{type:"primary",onClick:i.showDrawer},"Settings"),l.a.createElement(Ot.a,{title:"Settings",width:720,visible:s,onClose:i.closeDrawer},l.a.createElement(Lt,null)))),l.a.createElement(u.a.Footer,{className:"footer"},"Binale Software \xa92019"),l.a.createElement(lt,{open:g.open,title:g.title,content:g.content,onAction:T,onClose:b.closeModal}))})),en=function(e){var t=e.match.params;return l.a.createElement(Be.Provider,{fsElementId:t.id},l.a.createElement(Zt,null))};function tn(e){return l.a.createElement(i.a,{to:"/dashboard/Root"})}n(965),n(966);c.a.render(l.a.createElement(F,null,l.a.createElement(mt.Provider,null,l.a.createElement(function(){return l.a.createElement(s.a,null,l.a.createElement(i.b,{exact:!0,path:"/",render:tn}),l.a.createElement(i.d,null,l.a.createElement(i.b,{path:"/dashboard/:id",component:Ct}),l.a.createElement(i.b,{path:"/document/:id",component:en})))},null))),document.getElementById("root")),a.unregister()},238:function(e,t,n){},468:function(e,t,n){},502:function(e,t,n){e.exports=n.p+"static/media/logo.2fcb8508.png"},514:function(e,t,n){e.exports=n(1023)},528:function(e,t,n){},585:function(e,t){},587:function(e,t){},624:function(e,t){},625:function(e,t){},718:function(e,t,n){},719:function(e,t,n){},723:function(e,t,n){},762:function(e,t,n){},763:function(e,t,n){},764:function(e,t,n){},784:function(e,t,n){},846:function(e,t,n){},847:function(e,t,n){},848:function(e,t,n){},925:function(e,t,n){},926:function(e,t,n){},962:function(e,t,n){},963:function(e,t,n){},965:function(e,t,n){}},[[514,1,2]]]);
//# sourceMappingURL=main.1dba4bd2.chunk.js.map